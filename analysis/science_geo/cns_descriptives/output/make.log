--------------------------------------------------------------------------------
Makelog started: 2023-06-14 14:47:11
Working directory: /export/home/dor/cxu/innovation_projs/analysis/science_geo/cns_descriptives/code
--------------------------------------------------------------------------------
External links successfully created!

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      17.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2021 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: Unlimited-user 4-core, expiring 17 Nov 2023
Serial number: 501709306977
  Licensed to: Harvard Business School
               Research Computing

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 120,000; see help set_maxvar.

. do "/export/home/dor/cxu/innovation_projs/analysis/science_geo/cns_descriptiv
> es/code/analysis.do" 

. set more off

. clear all

. capture log close

. program drop _all

. set scheme modern

. pause on

. set seed 8975

. here, set
/export/home/dor/cxu/innovation_projs/analysis/science_geo/cns_descriptives/cod
> e/

. 
. program main
  1.     global country_name "countries"
  2.     global us_state_name "US states"
  3.     global area_name "US cities"
  4.     global city_full_name "world cities"
  5.     global inst_name "institutions"
  6.     global msatitle_name "MSAs"
  7.     foreach samp in cns {
  8.         di "OUTPUT START"
  9.         local samp_type = cond("`samp'" == "cns", "main", "robust")
 10.         foreach data in newfund { 
 11.             foreach var in cite_affl_wt {
 12.                 athr_loc, data(`data') samp(`samp') wt_var(`var')
 13.                 qui trends, data(`data') samp(`samp') wt_var(`var')
 14.             }
 15.             calc_broad_hhmi, data(`data') samp(`samp') 
 16.             top_mesh_terms, data(`data') samp(`samp') samp_type(`samp_type
> ')
 17.             qui output_tables, data(`data') samp(`samp') 
 18.         }
 19.     } 
 20.     top_mesh_terms, data(clin) samp(med) samp_type(clinical)
 21. end

. 
. program athr_loc
  1.     syntax, data(str) samp(str)  wt_var(str)
  2.     local suf = cond("`wt_var'" == "cite_affl_wt", "_wt", "") 
  3.     use ../external/cleaned_samps/cleaned_last5yrs_`data'_`samp', clear
  4.     foreach loc in country city_full inst msatitle {
  5.         qui gunique pmid 
  6.         local articles = r(unique)
  7.         qui sum `wt_var'
  8.         local total = round(r(sum))
  9.         assert `total' == `articles'
 10.         qui sum `wt_var' if !mi(`loc') 
 11.         local denom = r(sum) 
 12.         preserve
 13.         if inlist("`loc'", "us_state", "area", "msatitle") {
 14.             qui keep if country == "United States"
 15.         }
 16.         gcollapse (sum) `wt_var', by(`loc')
 17.         qui hashsort -`wt_var' 
 18.         qui gen perc = `wt_var' / `total' * 100
 19.         li if mi(`loc')
 20.         qui drop if mi(`loc')
 21.         qui gen cum_perc = sum(perc) 
 22.         qui count
 23.         local rank_end = min(r(N),20) 
 24.         li `loc' perc in 1/`rank_end'
 25.         di "Total articles: `total'"
 26.         mkmat perc cum_perc in 1/`rank_end', mat(top_`loc'_`samp'`suf')
 27.         mat top_`loc'_`data'_`samp' = nullmat(top_`loc'_`data'_`samp') , (
> top_`loc'_`samp'`suf')
 28.         qui levelsof `loc' in 1/2
 29.         global top2_`loc'_`data' "`r(levels)'"
 30.         if inlist("`loc'", "inst", "city_full", "msatitle") {
 31.             qui levelsof `loc' in 1/`rank_end'
 32.             global `loc'_`data' "`r(levels)'"
 33.         }
 34.         qui gen rank_grp = "first" if _n == 1
 35.         replace `loc' = "harvard university" if `loc' == "university harva
> rd"
 36.         replace `loc' = "stanford university" if `loc' == "university stan
> ford"
 37.         qui levelsof `loc' if _n == 1 
 38.         global `loc'_first "`r(levels)'"
 39.         qui levelsof `loc' if _n == 2
 40.         global `loc'_second "`r(levels)'"
 41.         qui replace rank_grp = "second" if _n == 2
 42.         qui replace rank_grp = "china" if `loc' == "China"
 43.         qui replace rank_grp = "rest of top 10" if inrange(_n,3,10) & rank
> _grp!="china"
 44.         qui replace rank_grp = "remaining" if mi(rank_grp)
 45.         keep `loc' rank_grp
 46.         qui save ../temp/`loc'_rank_`data'_`samp'`suf', replace
 47.         restore
 48.     }
 49. end

. 
. program calc_broad_hhmi
  1.    syntax, data(str) samp(str) 
  2.    use ../external/cleaned_samps/cleaned_last5yrs_`data'_`samp', clear
  3.    qui gunique pmid which_athr
  4.    local num_athrs = r(unique)
  5.    qui gunique pmid which_athr if country == "United States"
  6.    local num_athrs_US = r(unique)
  7.    foreach i in broad hhmi {
  8.        qui gunique pmid which_athr if has_`i'_affl == 1
  9.        local num_`i' = r(unique)
 10.        di `num_`i'' " authors of " `num_athrs' " are " "`i' affiliated or 
> " `num_`i''/`num_athrs'*100 " percent"
 11.        qui gunique pmid which_athr if has_`i'_affl == 1 & country == "Unit
> ed States"
 12.        local num_`i'_US = r(unique)
 13.        di `num_`i'_US' " US authors of " `num_athrs_US' " are " "`i' affil
> iated or " `num_`i'_US'/`num_athrs_US'*100 " percent"
 14.        // hhmi has to be us
.        preserve
 15.        keep if country == "United States"
 16.        qui gunique pmid which_athr if has_`i'_affl == 1 & inst == "Stanfor
> d University" 
 17.        local num_`i'_stanford = r(unique)
 18.        di `num_`i'_stanford' " stanford authors of " `num_`i'_US' " are " 
> "`i' affiliated or " `num_`i'_stanford'/`num_`i'_US'*100 " percent"
 19.        qui gunique pmid which_athr if has_`i'_affl == 1 & inst == "Harvard
>  University" 
 20.        local num_`i'_harvard = r(unique)
 21.        di `num_`i'_harvard' " harvard authors of " `num_`i'_US' " are " "`
> i' affiliated or " `num_`i'_harvard'/`num_`i'_US'*100 " percent"
 22.        restore
 23.        if "`i'" == "broad" {
 24.            qui count if  inlist(inst, "Harvard University", "Massachusetts
>  Institute of Technology", "Boston Children's Hospital", "Dana Farber Cancer 
> Institute", "Massachusetts General Hospital", "Brigham and Women's Hospital",
>  "Beth Israel Deaconess Medical Center")
 25.            if r(N) > 0 {
 26.                preserve
 27.                keep if inlist(inst, "Harvard University", "Massachusetts I
> nstitute of Technology", "Boston Children's Hospital", "Dana Farber Cancer In
> stitute", "Massachusetts General Hospital", "Brigham and Women's Hospital", "
> Beth Israel Deaconess Medical Center")
 28.                qui gunique pmid which_athr if has_`i'_affl == 1 
 29.                local num_athrs_broad = r(unique)
 30.                qui gunique pmid which_athr if has_`i'_affl == 1 & inst == 
> "Harvard University" 
 31.                local num_`i'_harvard = r(unique)
 32.                di `num_`i'_harvard' " harvard authors of " `num_athrs_broa
> d' " are " "`i' affiliated or " `num_`i'_harvard'/`num_athrs_broad'*100 " per
> cent"
 33.                qui gunique pmid which_athr if has_`i'_affl == 1 & inst == 
> "Massachusetts Institute of Technology" 
 34.                local num_`i'_mit= r(unique)
 35.                di `num_`i'_mit' " mit authors of " `num_athrs_broad' " are
>  " "`i' affiliated or " `num_`i'_mit'/`num_athrs_broad'*100 " percent"
 36.                restore 
 37.            }
 38.         }
 39.     }
 40. end

. 
. program trends
  1.     syntax, data(str) samp(str)  wt_var(str)
  2.     local suf = cond("`wt_var'" == "cite_affl_wt", "_wt", "") 
  3.     use ../external/cleaned_samps/cleaned_all_`data'_`samp', clear
  4.     cap drop counter
  5. 
.     qui bys pmid year: gen counter = _n == 1
  6.     qui bys year: egen tot_in_yr = total(counter)
  7.     foreach loc in country city_full inst msatitle {
  8.         preserve
  9.         replace `loc' = "harvard university" if `loc' == "university harva
> rd"
 10.         replace `loc' = "stanford university" if `loc' == "university stan
> ford"
 11.         qui merge m:1 `loc' using ../temp/`loc'_rank_`data'_`samp'`suf', a
> ssert(1 3) keep(1 3) nogen
 12.         if "`loc'" == "inst" {
 13.             replace `loc' = strproper(`loc')
 14.         }
 15.         qui sum year
 16.         local min_year = max(1988,r(min))
 17.         qui egen year_bin  = cut(year),  at(1988 1991 1993 1995 1997 1999 
> 2001 2003 2007 2009 2011 2013 2015 2017 2019 2021 2023)
 18.         keep if which_athr == 1
 19.         qui replace affl_wt = 1/num_affls
 20.         local year_var year_bin
 21.         qui bys pmid `year_var': replace counter = _n == 1
 22.         qui bys `year_var': egen tot_in_`year_var' = total(counter)
 23.         qui replace rank_grp = "remaining" if mi(rank_grp)
 24.         bys pmid: replace cite_count = . if _n !=1 
 25.         qui bys `year_var': egen tot_cites_in_`year_var' = total(cite_coun
> t)
 26.         replace cite_wt = cite_count/ tot_cites_in_`year_var' * tot_in_`ye
> ar_var'
 27.         hashsort pmid cite_wt
 28.         qui by pmid: replace cite_wt = cite_wt[_n-1] if mi(cite_wt)
 29.         replace cite_affl_wt = affl_wt * cite_wt
 30.         collapse (sum) `wt_var' (mean) tot_in_`year_var' (firstnm) `loc' ,
>  by(rank_grp `year_var')
 31.         qui gen perc = `wt_var'/tot_in_`year_var' * 100
 32.         qui bys `year_var': egen tot = sum(perc)
 33.         qui replace tot = round(tot)
 34.         assert tot==100
 35.         qui drop tot
 36.         if "`loc'" == "city_full" | "`loc'" == "msatitle" {
 37.             label define rank_grp 1 ${`loc'_first} 2 ${`loc'_second} 3 "Re
> st of the top 10 ${`loc'_name}" 4 "Remaining places"
 38.         }
 39.         if "`loc'" == "inst" {
 40.             local proper_1 = strproper(${`loc'_first})
 41.             local proper_2 = strproper(${`loc'_second})
 42.             label define rank_grp 1 "`proper_1'" 2 "`proper_2'" 3 "Rest of
>  the top 10 ${`loc'_name}" 4 "Remaining places"
 43.         }
 44.         if "`loc'" == "country" {
 45.             label define rank_grp 1 ${`loc'_first} 2 ${`loc'_second} 3 "Ch
> ina" 4 "Rest of the top 10 ${`loc'_name}" 5 "Remaining places"
 46.         }
 47.         label var rank_grp rank_grp
 48.         qui gen group = 1 if rank_grp == "first"
 49.         qui replace group = 2 if rank_grp == "second"
 50.         qui replace group = 3 if rank_grp == "china" & "`loc'" == "country
> "
 51.         local last = 2
 52.         if "`loc'" == "country" local last = 3 
 53.         qui replace group = `last'+1 if rank_grp == "rest of top 10" 
 54.         qui replace group = `last'+2 if rank_grp == "remaining"
 55.         qui hashsort `year_var' -group
 56.         qui bys `year_var': gen stack_perc = sum(perc)
 57.         keep rank_grp `year_var' `loc' perc group stack_perc
 58.         local stacklines
 59.         qui xtset group `year_var' 
 60.         qui levelsof group, local(rank_grps)
 61.         local items = `r(r)'
 62.         foreach x of local rank_grps {
 63.            colorpalette HTML purple, n(`items') nograph
 64.            local stacklines `stacklines' area stack_perc `year_var' if gro
> up == `x', fcolor("`r(p`x')'") lcolor(black) lwidth(*0.2) || 
 65.         }
 66.         qui gen labely = . 
 67.         qui gen rev_group = -group
 68.         if "`loc'"=="country" {
 69.             qui bys `year_var' (rev_group): replace labely = perc/2 if gro
> up == 5
 70.             qui bys `year_var' (rev_group): replace labely = perc/2 + perc
> [_n-1] if group == 4
 71.             qui bys `year_var' (rev_group): replace labely = perc/2 + perc
> [_n-1] + perc[_n-2] if group == 3
 72.             qui bys `year_var' (rev_group): replace labely = perc/2 + perc
> [_n-1] + perc[_n-2] + perc[_n-3] if group == 2
 73.             qui bys `year_var' (rev_group): replace labely = perc/2 + perc
> [_n-1] + perc[_n-2] + perc[_n-3] + perc[_n-4] if group == 1
 74.         }
 75.         if "`loc'"!="country" {
 76.             qui bys `year_var' (rev_group): replace labely = perc/2 if gro
> up == 4
 77.             qui bys `year_var' (rev_group): replace labely = perc/2 + perc
> [_n-1] if group == 3
 78.             qui bys `year_var' (rev_group): replace labely = perc/2 + perc
> [_n-1] + perc[_n-2] if group == 2
 79.             qui bys `year_var' (rev_group): replace labely = perc/2 + perc
> [_n-1] + perc[_n-2] + perc[_n-3] if group == 1
 80.         }
 81.         qui gen labely_lab = "Everywhere else" if group == `last'+2
 82.         qui replace labely_lab = "Rest of the top 10 ${`loc'_name}" if gro
> up == `last'+1
 83.         qui replace labely_lab = "China" if group == 3 & "`loc'"=="country
> "
 84.         qui replace labely_lab = ${`loc'_second} if group == 2
 85.         qui replace labely_lab = ${`loc'_first} if group == 1
 86.         qui replace labely_lab = strproper(${`loc'_second}) if group == 2 
> & "`loc'" == "inst"
 87.         qui replace labely_lab = strproper(${`loc'_first}) if group == 1 &
>  "`loc'" == "inst"
 88.         qui replace labely_lab = subinstr(labely_lab, "United States", "US
> ", .)
 89.         qui replace labely_lab = subinstr(labely_lab, "United Kingdom", "U
> K", .)
 90.         qui sum `year_var'
 91.         replace `year_var' = 2022 if `year_var' == r(max)
 92.         if "`loc'" == "country" {
 93.             graph tw `stacklines' (scatter labely `year_var' if `year_var'
>  ==2022, ms(smcircle) ///
>               msize(0.2) mcolor(black%40) mlabsize(vsmall) mlabcolor(black) m
> label(labely_lab)), ///
>               ytitle("Share of Worldwide Fundamental Science Research Output"
> , size(vsmall)) xtitle("Year", size(vsmall)) xlabel(`min_year'(2)2022, angle(
> 45) labsize(vsmall)) ylabel(0(10)100, labsize(vsmall)) ///
>               graphregion(margin(r+25)) plotregion(margin(zero)) ///
>               legend(off label(1 ${`loc'_first}) label(2 ${`loc'_second}) lab
> el(3 "China") label(4 "Rest of the top 10 ${`loc'_name}") label(5 "Remaining 
> places") ring(1) pos(6) rows(2))
 94.             qui graph export ../output/figures/`loc'_stacked_`data'_`samp'
> `suf'.pdf , replace 
 95.         }
 96.         local w = 25 
 97.         if "`loc'" == "msatitle" local w = 32
 98.         if "`loc'" != "country" {
 99.             graph tw `stacklines' (scatter labely `year_var' if `year_var'
>  ==2022, ms(smcircle) ///
>               msize(0.2) mcolor(black%40) mlabsize(vsmall) mlabcolor(black) m
> label(labely_lab)), ///
>               ytitle("Share of Worldwide Fundamental Science Research Output"
> , size(vsmall)) xtitle("Year", size(vsmall)) xlabel(`min_year'(2)2022, angle(
> 45) labsize(vsmall)) ylabel(0(10)100, labsize(vsmall)) ///
>               graphregion(margin(r+`w')) plotregion(margin(zero)) ///
>               legend(off label(1 ${`loc'_first}) label(2 ${`loc'_second}) lab
> el(3 "Rest of the top 10 ${`loc'_name}") label(4 "Remaining places") ring(1) 
> pos(6) rows(2))
100.             qui graph export ../output/figures/`loc'_stacked_`data'_`samp'
> `suf'.pdf , replace 
101.         }
102.         restore
103.     }
104. end 

.     
. program top_mesh_terms
  1.     syntax, data(str) samp(str) samp_type(str)
  2.     use ../external/`samp_type'_split/mesh_`data'_`samp'.dta, clear 
  3.     cap keep pmid mesh which_mesh cat journal_abbr
  4.     qui merge m:1 pmid using ../external/cleaned_samps/list_of_pmids_`data
> '_`samp', assert(1 2 3) keep(3) nogen
  5.     gunique pmid
  6.     cap drop _merge
  7.     qui gunique pmid
  8.     local total_articles = r(unique)
  9.     qui replace mesh = subinstr(mesh, "=Y>","",.)
 10.     qui replace mesh = subinstr(mesh, "=N>","",.)
 11.     qui gen gen_mesh = mesh if strpos(mesh, ",") == 0 & strpos(mesh, ";") 
> == 0
 12.     qui replace gen_mesh = mesh if strpos(mesh, "Models") > 0
 13.     qui replace gen_mesh = subinstr(gen_mesh, "&; ", "&",.)
 14.     qui gen rev_mesh = reverse(mesh)
 15.     qui replace rev_mesh = substr(rev_mesh, strpos(rev_mesh, ",")+1, strle
> n(rev_mesh)-strpos(rev_mesh, ","))
 16.     qui replace rev_mesh = reverse(rev_mesh)
 17.     qui replace gen_mesh = rev_mesh if mi(gen_mesh) 
 18.     qui drop rev_mesh
 19.     preserve
 20.     qui contract pmid mesh, nomiss
 21.     qui save ../temp/contracted_mesh_`data'_`samp', replace
 22.     restore
 23.     contract pmid gen_mesh, nomiss
 24.     qui save ../temp/contracted_gen_mesh_`data'_`samp', replace
 25. 
.     foreach mesh in gen_mesh {
 26.         use ../temp/contracted_`mesh'_`data'_`samp', clear
 27.         qui bys pmid: gen wt = 1/_N
 28.         qui bys pmid: gen num_`mesh' = _N
 29.         sum num_`mesh'
 30.         cap drop _freq
 31.         collapse (sum) article_wt = wt , by(`mesh')
 32.         qui hashsort -article_wt
 33.         qui gen perc = article_wt/`total_articles'*100
 34.         qui gen cum_perc = sum(perc) 
 35.         qui sum article_wt
 36.         local total = round(r(sum))
 37.         qui count
 38.         local rank_end = min(20,r(N))
 39.         li in 1/`rank_end'
 40.         mkmat article_wt perc cum_perc in 1/`rank_end', mat(top_`mesh'_`sa
> mp')
 41.         mat top_`mesh'_`data'_`samp' = top_`mesh'_`samp' \ (.,`total', .)
 42.         qui levelsof `mesh' in 1/3, local(`mesh'_terms_`data')
 43.         qui gen rank = _n
 44.         qui replace rank = 4 if rank > 3
 45.         qui replace `mesh' = "other" if rank == 4
 46.         qui gen inst = "total"
 47.         collapse (sum) article_wt perc cum_perc, by(inst `mesh' rank)
 48.         drop rank
 49.         qui save ../temp/`mesh'_`data'_`samp', replace
 50.     }
 51. end

. 
. program output_tables
  1.     syntax, data(str) samp(str)
  2.     foreach file in top_country top_city_full top_inst top_gen_mesh top_ms
> atitle {
  3.         qui matrix_to_txt, saving("../output/tables/`file'_`data'_`samp'.t
> xt") matrix(`file'_`data'_`samp') ///
>            title(<tab:`file'_`data'_`samp'>) format(%20.4f) replace
  4.          }
  5.  end

. ** 
. main
OUTPUT START

     +-------------------------------+
     | country   cite_a~t       perc |
     |-------------------------------|
 27. |            10.7674   .1178439 |
     +-------------------------------+

     +---------------------------+
     |        country       perc |
     |---------------------------|
  1. |  United States   53.78777 |
  2. | United Kingdom   9.312271 |
  3. |        Germany   7.311126 |
  4. |          China   7.174116 |
  5. |    Switzerland   2.469343 |
     |---------------------------|
  6. |         France   2.248033 |
  7. |         Canada   1.933176 |
  8. |          Japan   1.836909 |
  9. |      Australia   1.806093 |
 10. |    Netherlands   1.660942 |
     |---------------------------|
 11. |         Sweden   1.646865 |
 12. |         Israel    1.18725 |
 13. |        Belgium   .8324381 |
 14. |          Spain   .7443843 |
 15. |        Austria   .7247032 |
     |---------------------------|
 16. |          Italy   .6877446 |
 17. |    South Korea   .5869245 |
 18. |        Denmark     .49153 |
 19. |   South Africa   .4272356 |
 20. |      Singapore   .4268195 |
     +---------------------------+
Total articles: 9137
(0 real changes made)
(0 real changes made)

      +--------------------------------+
      | city_f~l   cite_a~t       perc |
      |--------------------------------|
 118. |             10.7674   .1178439 |
      +--------------------------------+

     +----------------------------------------------+
     |                         city_full       perc |
     |----------------------------------------------|
  1. |   Boston-Cambridge, United States   11.35207 |
  2. |           Bay Area, United States   7.740846 |
  3. |           New York, United States   5.734366 |
  4. |            London, United Kingdom   3.414328 |
  5. |                    Beijing, China   3.338151 |
     |----------------------------------------------|
  6. | San Diego-La Jolla, United States   2.750328 |
  7. |            Seattle, United States   2.027158 |
  8. |         Cambridge, United Kingdom   2.006378 |
  9. |            Oxford, United Kingdom   1.392462 |
 10. |        Bethesda-DC, United States   1.347242 |
     |----------------------------------------------|
 11. |                   Shanghai, China   1.249568 |
 12. |       Philadelphia, United States   1.118804 |
 13. |             Dallas, United States   1.116248 |
 14. |          New Haven, United States   1.096798 |
 15. |  Research Triangle, United States       1.09 |
     |----------------------------------------------|
 16. |                     Paris, France   1.000847 |
 17. |        Saint Louis, United States   .9932692 |
 18. |            Houston, United States   .9644265 |
 19. |                 Stockholm, Sweden   .9555098 |
 20. |          Baltimore, United States   .9193122 |
     +----------------------------------------------+
Total articles: 9137
(0 real changes made)
(0 real changes made)

      +----------------------------+
      | inst   cite_a~t       perc |
      |----------------------------|
   3. |        224.0127   2.451709 |
      +----------------------------+

     +--------------------------------------------------+
     |                                  inst       perc |
     |--------------------------------------------------|
  1. |                    university harvard   4.595372 |
  2. |                   university stanford   3.277802 |
  3. |   university california san francisco   1.876771 |
  4. |          massachusetts institute tech   1.811859 |
  5. |                            max planck   1.749864 |
     |--------------------------------------------------|
  6. |                 university washington   1.672681 |
  7. |               chinese academy science   1.627342 |
  8. |                                   nih   1.314367 |
  9. |                     university oxford   1.310638 |
 10. |                              deepmind   1.248563 |
     |--------------------------------------------------|
 11. |        university california berkeley   1.239756 |
 12. |                   university columbia   1.151841 |
 13. |            university the rockefeller    1.13678 |
 14. |                       university yale   1.075589 |
 15. | memorial sloankettering cancer center   1.070662 |
     |--------------------------------------------------|
 16. |       university california san diego    1.03126 |
 17. |                                 broad   .9626772 |
 18. |        university washington st louis   .9458163 |
 19. |                    university cornell   .9319532 |
 20. |                  university cambridge   .9141858 |
     +--------------------------------------------------+
Total articles: 9137
(1 real change made)
(1 real change made)

     +--------------------------------+
     | msatitle   cite_a~t       perc |
     |--------------------------------|
 17. |             50.0951   .5482664 |
     +--------------------------------+

     +---------------------------------------------------------+
     |                                     msatitle       perc |
     |---------------------------------------------------------|
  1. |               Boston-Cambridge-Newton, MA-NH   11.55518 |
  2. |                                 Bay Area, CA   7.932646 |
  3. |        New York-Newark-Jersey City, NY-NJ-PA   6.659316 |
  4. |                       San Diego-Carlsbad, CA   2.770823 |
  5. | Washington-Arlington-Alexandria, DC-VA-MD-WV   2.364552 |
     |---------------------------------------------------------|
  6. |                  Seattle-Tacoma-Bellevue, WA   2.040332 |
  7. |           Los Angeles-Long Beach-Anaheim, CA   1.931931 |
  8. |  Philadelphia-Camden-Wilmington, PA-NJ-DE-MD   1.178733 |
  9. |              Dallas-Fort Worth-Arlington, TX    1.14072 |
 10. |         Houston-The Woodlands-Sugar Land, TX    1.10742 |
     |---------------------------------------------------------|
 11. |                        New Haven-Milford, CT   1.100822 |
 12. |           Chicago-Naperville-Elgin, IL-IN-WI   1.083494 |
 13. |                   Research Triangle Park, NC   1.082705 |
 14. |                             St. Louis, MO-IL   .9958805 |
 15. |                Baltimore-Columbia-Towson, MD   .9312208 |
     |---------------------------------------------------------|
 16. |                                  Trenton, NJ   .8594745 |
 17. |                                Ann Arbor, MI    .485642 |
 18. |                            Memphis, TN-MS-AR   .4171034 |
 19. |                                   Ithaca, NY   .3799246 |
 20. |                               Pittsburgh, PA   .3611152 |
     +---------------------------------------------------------+
Total articles: 9137
(0 real changes made)
(0 real changes made)
2540 authors of 140296 are broad affiliated or 1.8104579 percent
2421 US authors of 77392 are broad affiliated or 3.1282303 percent
(123,045 observations deleted)
. stanford authors of 2421 are broad affiliated or . percent
. harvard authors of 2421 are broad affiliated or . percent
4054 authors of 140296 are hhmi affiliated or 2.8896048 percent
4050 US authors of 77392 are hhmi affiliated or 5.233099 percent
(123,045 observations deleted)
. stanford authors of 4050 are hhmi affiliated or . percent
. harvard authors of 4050 are hhmi affiliated or . percent
N = 177,645; 38,066 unbalanced groups of sizes 1 to 24

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
num_gen_mesh |    163,226    4.942154    1.715815          1         14

     +--------------------------------------------------------------------+
     |                          gen_mesh   articl~t       perc   cum_perc |
     |--------------------------------------------------------------------|
  1. |             Transcription Factors   394.9892   1.037643   1.037643 |
  2. |              DNA-Binding Proteins   366.3111   .9623051   1.999948 |
  3. |                             Genes   314.8599    .827142    2.82709 |
  4. |          Saccharomyces cerevisiae   308.1882   .8096154   3.636706 |
  5. |               Signal Transduction   298.0215   .7829072   4.419613 |
     |--------------------------------------------------------------------|
  6. |                           Neurons   296.2214   .7781785   5.197791 |
  7. |        Gene Expression Regulation   294.8762   .7746446   5.972436 |
  8. |                 Membrane Proteins   256.4711   .6737539    6.64619 |
  9. |                               DNA   236.0798   .6201854   7.266375 |
 10. |                          Proteins   226.4619    .594919   7.861294 |
     |--------------------------------------------------------------------|
 11. | Saccharomyces cerevisiae Proteins   217.4529   .5712523   8.432547 |
 12. |           Drosophila melanogaster   205.4707    .539775   8.972322 |
 13. |                Bacterial Proteins   196.5683   .5163881   9.488709 |
 14. |               Drosophila Proteins   190.4185   .5002325   9.988942 |
 15. |                  Nuclear Proteins   188.3991   .4949275   10.48387 |
     |--------------------------------------------------------------------|
 16. |                  Escherichia coli   180.4718   .4741023   10.95797 |
 17. |                  Carrier Proteins   172.2348   .4524637   11.41044 |
 18. |                     Transcription   159.4449   .4188644    11.8293 |
 19. |                     T-Lymphocytes   156.2262   .4104087   12.23971 |
 20. |                       Arabidopsis   155.9616   .4097136   12.64942 |
     +--------------------------------------------------------------------+
N = 73,731; 20,357 unbalanced groups of sizes 1 to 15

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
num_gen_mesh |     72,021    4.199872    1.592435          1         12

     +----------------------------------------------------------------------+
  1. |                                       gen_mesh | articl~t |     perc |
     |                          Myocardial Infarction | 152.2417 | .7478591 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               .7478591                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  2. |                                       gen_mesh | articl~t |     perc |
     |                                Family Practice | 144.0429 | .7075839 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               1.455443                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  3. |                                       gen_mesh | articl~t |     perc |
     |                               Breast Neoplasms | 136.8599 | .6722991 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               2.127742                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  4. |                                       gen_mesh | articl~t |     perc |
     |                                 HIV Infections | 128.4124 |  .630802 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               2.758544                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  5. |                                       gen_mesh | articl~t |     perc |
     |                               Coronary Disease | 122.1211 | .5998972 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               3.358441                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  6. |                                       gen_mesh | articl~t |     perc |
     |                        Cardiovascular Diseases | 113.6504 | .5582865 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               3.916728                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  7. |                                       gen_mesh | articl~t |     perc |
     |                                         Asthma |  104.419 | .5129393 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               4.429667                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  8. |                                       gen_mesh | articl~t |     perc |
     |                                   Hypertension | 102.9354 | .5056509 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               4.935318                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
  9. |                                       gen_mesh | articl~t |     perc |
     |                                      Mortality | 89.25714 | .4384592 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               5.373777                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 10. |                                       gen_mesh | articl~t |     perc |
     |                                      Neoplasms | 87.65595 | .4305937 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               5.804371                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 11. |                                       gen_mesh | articl~t |     perc |
     |             Acquired Immunodeficiency Syndrome | 87.04762 | .4276053 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               6.231976                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 12. |                                       gen_mesh | articl~t |     perc |
     |                                        Smoking | 83.77897 | .4115487 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               6.643525                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 13. |                                       gen_mesh | articl~t |     perc |
     |                      Diabetes Mellitus, Type 2 | 81.81191 | .4018859 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               7.045411                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 14. |                                       gen_mesh | articl~t |     perc |
     |                      Diabetes Mellitus, Type 1 | 66.44881 | .3264175 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               7.371828                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 15. |                                       gen_mesh | articl~t |     perc |
     |                                 Mass Screening | 64.54167 |  .317049 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               7.688877                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 16. |                                       gen_mesh | articl~t |     perc |
     |                          Anti-Bacterial Agents | 64.00754 | .3144252 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               8.003303                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 17. |                                       gen_mesh | articl~t |     perc |
     | Antineoplastic Combined Chemotherapy Protocols | 63.90675 | .3139301 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               8.317232                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 18. |                                       gen_mesh | articl~t |     perc |
     |                                        Obesity | 59.02976 | .2899728 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               8.607205                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 19. |                                       gen_mesh | articl~t |     perc |
     |                                  Heart Failure | 56.59921 | .2780331 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               8.885239                               |
     +----------------------------------------------------------------------+

     +----------------------------------------------------------------------+
 20. |                                       gen_mesh | articl~t |     perc |
     |                              Disease Outbreaks | 56.26349 |  .276384 |
     |----------------------------------------------------------------------|
     |                               cum_perc                               |
     |                               9.161623                               |
     +----------------------------------------------------------------------+

. 
end of do-file

--------------------------------------------------------------------------------
Makelog ended: 2023-06-14 14:48:10
Working directory: /export/home/dor/cxu/innovation_projs/analysis/science_geo/cns_descriptives/code
--------------------------------------------------------------------------------
