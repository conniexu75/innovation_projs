--------------------------------------------------------------------------------
Makelog started: 2023-12-24 23:02:22
Working directory: /export/home/dor/cxu/innovation_projs/analysis/science_geo/mover_analysis/code
--------------------------------------------------------------------------------
External links successfully created!

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      17.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2021 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: Unlimited-user 4-core network, expiring 17 Nov 2024
Serial number: 501809301897
  Licensed to: Harvard Business School
               Research Computing

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 120,000; see help set_maxvar.

. do "/export/home/dor/cxu/innovation_projs/analysis/science_geo/mover_analysis
> /code/analysis.do" 

. set more off

. clear all

. capture log close

. program drop _all

. set scheme modern

. graph set window fontface "Arial Narrow"
not available in non-GUI version

. pause on

. set seed 8975

. global temp "/export/scratch/cxu_sci_geo/movers"

. global y_name "Productivity"

. global pat_adj_wt_name "Patent-to-Paper Citations"

. global ln_patent_name "Log Patent-to-Paper Citations"

. global ln_y_name "Log Productivity"

. global x_name "Cluster Size"

. global ln_x_name "Log Cluster Size"

. global time year 

. program main
  1.     foreach t in year_firstlast {
  2.         make_movers, samp(`t')
  3.         qui mover_stats, samp(`t')
  4.         output_tables, samp(`t')
  5.         event_study, samp(`t') timeframe(20) ymax(1) ygap(0.1) 
  6.         *event_study, samp(`t') timeframe(10) startyr(1945) endyr(1975) ym
> ax(1) ygap(0.1)
.         *event_study, samp(`t') timeframe(10) startyr(1955) endyr(1985) ymax(
> 1) ygap(0.1)
.         *event_study, samp(`t') timeframe(10) startyr(1965) endyr(1995) ymax(
> 1) ygap(0.1)
.         *event_study, samp(`t') timeframe(10) startyr(1975) endyr(2005) ymax(
> 1) ygap(0.1)
.         event_study, samp(`t') timeframe(10) startyr(1985) endyr(2023) ymax(1
> ) ygap(0.1)
  7.     }
  8. end

. 
. program make_movers
  1.     syntax, samp(str)
  2.     use if !mi(msa_comb) using ../external/samp/athr_panel_full_comb_`samp
> ', clear 
  3.     hashsort athr_id year
  4.     gen place_count =  1 if msa_comb != msa_comb[_n-1]
  5.     bys athr_id: egen num_moves = total(place_count)
  6.     bys athr_id (year): gen which_place = sum(place_count)
  7.     bys athr_id: gen athr_counter =  _n == 1
  8.     replace num_moves = num_moves-1
  9.     gen mover = num_moves > 0 
 10.     tab num_moves if athr_counter == 1 & mover == 1
 11.     tab mover if athr_counter == 1
 12.     bys athr_id year: gen athr_year_counter =  _n == 1
 13.     tab mover if athr_year_counter == 1
 14.     replace which_place = 0 if mover == 0
 15.     replace which_place = 1 if which_place == 0 & mover == 1
 16.     bys athr_id: egen min_which_place =min(which_place)
 17.     replace which_place = which_place + 1 if mover == 1 & min_which_place 
> == 0
 18.     drop min_which_place
 19.     hashsort athr_id year 
 20.     bys athr_id (year): gen origin = 1 if which_place == 1
 21.     gen dest = place_count == 1 & origin != 1 & mover == 1
 22.     bys athr_id (year): replace origin = 1 if mover == 1 & place_count[_n+
> 1] == 1 & mi(origin) 
 23.     hashsort athr_id which_place origin
 24.     bys athr_id which_place:  replace origin = origin[_n-1] if mi(origin) 
> & !mi(origin[_n-1])
 25.     save ${temp}/mover_temp_`samp' , replace
 26. end

. 
. program mover_stats
  1.     syntax, samp(str)
  2.     use ${temp}/mover_temp_`samp' , clear  
  3.     gen patented = pat_wt > 0
  4.     gegen msa = group(msa_comb)
  5.     gen ln_y = ln(impact_cite_affl_wt)
  6.     gen ln_x = ln(msa_size)
  7.     gen ln_patent = ln(pat_adj_wt)
  8.     rename impact_cite_affl_wt y
  9.     rename msa_size x
 10.     foreach var in ln_x ln_y {
 11.         sum `var' if mover == 0
 12.         mat nonmover = r(mean) \  r(sd) 
 13.         sum `var' if mover == 1 
 14.         mat mover = r(mean)\ r(sd)
 15.         sum `var' if mover == 1 & origin == 1  
 16.         mat mover_origin = r(mean)\ r(sd) 
 17.         sum `var' if mover == 1 & dest == 1  
 18.         mat mover_dest = r(mean)\ r(sd) 
 19.         sum `var' if mover == 1  & num_moves == 1
 20.         mat sing_mover = r(mean)\ r(sd)
 21.         sum `var' if mover == 1  & num_moves == 1 & origin==1
 22.         mat sing_mover_origin = r(mean)\ r(sd)
 23.         sum `var' if mover == 1  & num_moves == 1 & dest==1
 24.         mat sing_mover_dest = r(mean)\ r(sd)
 25.         mat row = (nonmover, sing_mover, sing_mover_origin, sing_mover_des
> t)
 26.         mat stat_`samp' = nullmat(stat_`samp') \ row 
 27.     }
 28.     qui gunique athr_id if mover == 0
 29.     mat N = r(unique)
 30. *    qui gunique athr_id if mover == 1
. *    mat N = N, r(unique), r(unique), r(unique)
.     qui gunique athr_id if mover == 1 & num_moves == 1
 31.     mat N = N, r(unique), r(unique), r(unique)
 32.     mat stat_`samp' = nullmat(stat_`samp') \ N
 33.     gen ln_affl_wt = ln(affl_wt)
 34.     gcollapse (mean) msa_y = y msa_x = x msa_ln_y = ln_y msa_ln_x = ln_x m
> sa_ln_patent = ln_patent msa_patent = pat_adj_wt msa_patent_rate = patented m
> sa_affl_wt = affl_wt msa_ln_affl_wt = ln_affl_wt (firstnm) msa, by(msa_comb $
> {time})
 35.     save ${temp}/msa_`samp'_collapsed, replace
 36. 
.     use if mover == 1 & num_moves == 1 using ${temp}/mover_temp_`samp' , clea
> r  
 37.     gen ln_y = ln(impact_cite_affl_wt)
 38.     gen ln_x = ln(msa_size)
 39.     gen ln_patent = ln(pat_adj_wt)
 40.     gen ln_affl_wt = ln(affl_wt)
 41.     gen patented = pat_wt > 0
 42.     hashsort athr_id which_place year
 43.     rename impact_cite_affl_wt y
 44.     rename msa_size x
 45.     foreach var in y x  ln_x ln_y ln_patent ln_affl_wt patented {
 46.         bys athr_id which_place: egen avg_`var' = mean(`var') 
 47.     }
 48.     hashsort athr_id which_place -year
 49.     gduplicates drop athr_id which_place, force
 50.     merge m:1 msa_comb year using ${temp}/msa_`samp'_collapsed, assert(2 3
> ) keep(3) nogen
 51.     hashsort athr_id which_place year
 52.     foreach var in msa_ln_y msa_ln_x msa_ln_patent avg_ln_y avg_ln_x avg_l
> n_patent {
 53.         if strpos("`var'", "msa_") > 0 {
 54.             local type "Destination-Origin Difference in"
 55.             local stem = subinstr("`var'", "msa_","",.)
 56.         }
 57. 
.         if strpos("`var'", "avg_") > 0 {
 58.             local type "Change in"
 59.             local stem = subinstr("`var'", "avg_","",.)
 60.         }
 61.         by athr_id: gen `var'_diff = `var'[_n+1] - `var'
 62.         qui sum `var'_diff
 63.         local N = r(N)
 64.         local mean : dis %3.2f r(mean)
 65.         local sd : dis %3.2f r(sd)
 66.         tw hist `var'_diff, frac ytitle("Share of Movers", size(vsmall)) x
> title("`type' ${`stem'_name}", size(vsmall)) color(edkblue) xlab(, labsize(vs
> mall)) ylab(, labsize(vsmall)) legend(on order(- "N (Movers) = `N'" ///
>                                                         "Mean = `mean'" ///
>                                                         "            (`sd')")
>  pos(1) ring(0) size(vsmall) region(fcolo(none)))
 67.         graph export ../output/figures/`var'_diff_`samp'.pdf, replace
 68.     }
 69. 
.     reg avg_ln_y_diff msa_ln_y_diff 
 70.     local N = e(N)
 71.     local coef : dis %3.2f _b[msa_ln_y_diff]
 72.     binscatter2 avg_ln_y_diff msa_ln_y_diff,  mcolor(gs5) lcolor(ebblue) x
> lab(, labsize(vsmall)) ylab(, labsize(vsmall)) xtitle("Destination-Origin Dif
> ference in Log Productivity", size(vsmall)) ytitle("Change in Log Productivit
> y after Move", size(vsmall)) legend(on order(- "N (Movers) = `N'" ///
>                                                             "Slope = `coef'")
>  pos(5) ring(0) size(vsmall) region(fcolor(none)))
 73.     graph export ../output/figures/place_effect_desc_`samp'.pdf , replace
 74.     
.     reg avg_ln_patent_diff msa_ln_y_diff 
 75.     local N = e(N)
 76.     local coef : dis %3.2f _b[msa_ln_y_diff]
 77.     binscatter2 avg_ln_patent_diff msa_ln_y_diff,  mcolor(gs5) lcolor(ebbl
> ue) xlab(, labsize(vsmall)) ylab(, labsize(vsmall)) ytitle("Change in Log Pap
> er-to-Patent Citations after Move", size(vsmall)) xtitle("Destination-Origin 
> Difference in Log Productivity", size(vsmall)) legend(on order(- "N (Movers) 
> = `N'" ///
>                                                                              
> "Slope = `coef'") pos(5) ring(0) size(vsmall) region(fcolor(none)))
 78.     *graph export ../output/figures/place_productivity_patent_bs_`samp'.pd
> f , replace
.     gcontract athr_id avg_ln_y_diff avg_ln_x_diff msa_ln_y_diff msa_ln_x_diff
>  year
 79.     drop _freq
 80.     drop if mi(avg_ln_y_diff)
 81.     rename year move_year
 82.     save ../temp/dest_origin_changes, replace
 83. end

. 
. program event_study 
  1.     syntax, samp(str) timeframe(int) [startyr(int 1945) endyr(int 2023) ym
> ax(real 1) ygap(real 0.2)] 
  2.     cap mat drop _all  
  3.     use if mover == 1 & num_moves == 1 & inrange(year, `startyr', `endyr')
>   using ${temp}/mover_temp_`samp' , clear  
  4.     keep athr_id inst field year msa_comb impact_cite_affl_wt msa_size whi
> ch_place inst_id
  5.     hashsort athr_id year
  6.     by athr_id: gen move = which_place != which_place[_n+1] &  _n != _N
  7.     gen move_year = year if move == 1
  8.     hashsort athr_id move_year
  9.     by athr_id: replace move_year = move_year[_n-1] if mi(move_year) & !mi
> (move_year[_n-1])
 10.     gen rel = year - move_year
 11.     merge m:1 athr_id move_year using ../temp/dest_origin_changes, keep(3)
>  nogen
 12.     hashsort athr_id year
 13.     gegen msa = group(msa_comb)
 14.     rename inst inst_name
 15.     gegen inst = group(inst_id)
 16.     gen ln_y = ln(impact_cite_affl_wt)
 17.     forval i = 1/`timeframe' {
 18.         gen lag`i' = 1 if rel == -`i'
 19.         gen lead`i' = 1 if rel == `i'
 20.     }
 21.     ds lead* lag*
 22.     foreach var in `r(varlist)' {
 23.         replace `var' = 0 if mi(`var')
 24.         replace `var' = `var'*msa_ln_y_diff
 25.     }
 26.     gen treat = msa_ln_y_diff if rel == 0  
 27.     replace treat = 0 if mi(treat)
 28.     local leads
 29.     local lags
 30.     forval i = 1/`timeframe' {
 31.         local leads `leads' lead`i'
 32.         local lags lag`i' `lags'
 33.     }
 34.     gunique athr_id 
 35.     local num_movers = r(unique)
 36.     bys athr_id: egen l2h_move = max(msa_ln_y_diff > 0)
 37.     bys athr_id: egen h2l_move = max(msa_ln_y_diff < 0)
 38.     reghdfe ln_y `lags' treat `leads' if inrange(rel,-`timeframe',`timefra
> me') , absorb(year field msa field#year field#msa athr_id) vce(cluster msa)
 39.     local normalize = _b[lag1]
 40.     foreach var in `lags' treat `leads' {
 41.         mat row = _b[`var']-`normalize', _se[`var']
 42.         if "`var'" == "lag1" {
 43.             mat row = _b[`var']-`normalize',0
 44.         }
 45.         mat es = nullmat(es) \ row 
 46.     }
 47.     svmat es
 48.     preserve
 49.     keep es1 es2
 50.     drop if mi(es1)
 51.     rename (es1 es2) (b se)
 52.     gen ub = b + 1.96*se
 53.     gen lb  = b - 1.96*se
 54.     gen rel = -`timeframe' if _n == 1
 55.     replace rel = rel[_n-1]+ 1 if _n > 1
 56.     drop if rel ==`timeframe' 
 57.     sum b if inrange(rel, -`timeframe',-2)
 58.     local pre_mean : di %3.2f r(mean)
 59.     sum b if inrange(rel, 1,`timeframe')
 60.     local post_mean : di %3.2f r(mean)
 61.     local end = `timeframe' - 1
 62.     tw rcap ub lb rel if rel != -1,  lcolor(gs10) || scatter b rel, mcolor
> (ebblue) xlab(-`timeframe'(1)`end', angle(45) labsize(vsmall)) ylab(-`ymax'(`
> ygap')`ymax', labsize(vsmall)) ///
>       yline(0, lcolor(black) lpattern(solid)) xline(0, lcolor(purple%50) lpat
> tern(dash)) plotregion(margin(none)) ///
>       legend(on order(- "N (Movers) = `num_movers'" ///
>                                                         "Pre-period mean = `p
> re_mean'" ///
>                                                         "Post-period mean = `
> post_mean'") pos(5) ring(0) size(vsmall) region(fcolor(none))) xtitle("Relati
> ve Year to Move", size(vsmall)) ytitle("Log Productivity", size(vsmall))
 63.     graph export ../output/figures/es`startyr'_`endyr'_`samp'.pdf, replace
 64.     restore
 65. end

. 
. program output_tables
  1.     syntax, samp(str)
  2.     foreach file in stat { 
  3.          qui matrix_to_txt, saving("../output/tables/`file'_`samp'.txt") m
> atrix(`file'_`samp') ///
>            title(<tab:`file'_`samp'>) format(%20.4f) replace
  4.     }
  5. 
. end

. ** 
. main
(already sorted)
(156,297 missing values generated)
(363,753 real changes made)

  num_moves |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |     19,189       78.23       78.23
          2 |      4,106       16.74       94.97
          3 |        908        3.70       98.67
          4 |        231        0.94       99.61
          5 |         63        0.26       99.87
          6 |         25        0.10       99.97
          7 |          6        0.02       99.99
          8 |          2        0.01      100.00
------------+-----------------------------------
      Total |     24,530      100.00

      mover |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    156,632       86.46       86.46
          1 |     24,530       13.54      100.00
------------+-----------------------------------
      Total |    181,162      100.00

      mover |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |    240,554       66.13       66.13
          1 |    123,199       33.87      100.00
------------+-----------------------------------
      Total |    363,753      100.00
(230,784 real changes made)
(315 real changes made)
(0 real changes made)
(already sorted)
(323,631 missing values generated)
(7042 real changes made)
(9528 real changes made)
file /export/scratch/cxu_sci_geo/movers/mover_temp_year_firstlast.dta saved
(60,667 missing values generated)
(60667 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            79,545  
    -----------------------------------------
(128 missing values generated)
(77,184 missing values generated)
(78,251 missing values generated)
(77,521 missing values generated)
(77,371 missing values generated)
(78,050 missing values generated)
(76,930 missing values generated)
(78,365 missing values generated)
(76,712 missing values generated)
(78,649 missing values generated)
(76,567 missing values generated)
(78,854 missing values generated)
(76,661 missing values generated)
(78,972 missing values generated)
(76,798 missing values generated)
(79,073 missing values generated)
(76,981 missing values generated)
(79,175 missing values generated)
(77,120 missing values generated)
(79,245 missing values generated)
(77,315 missing values generated)
(79,239 missing values generated)
(77,503 missing values generated)
(79,307 missing values generated)
(77,604 missing values generated)
(79,351 missing values generated)
(77,732 missing values generated)
(79,369 missing values generated)
(77,910 missing values generated)
(79,423 missing values generated)
(77,970 missing values generated)
(79,427 missing values generated)
(78,095 missing values generated)
(79,455 missing values generated)
(78,302 missing values generated)
(79,467 missing values generated)
(78,370 missing values generated)
(79,493 missing values generated)
(78,469 missing values generated)
(79,492 missing values generated)
(78,583 missing values generated)
lead1   lead5   lead9   lead13  lead17  lag1    lag5    lag9    lag13   lag17
lead2   lead6   lead10  lead14  lead18  lag2    lag6    lag10   lag14   lag18
lead3   lead7   lead11  lead15  lead19  lag3    lag7    lag11   lag15   lag19
lead4   lead8   lead12  lead16  lead20  lag4    lag8    lag12   lag16   lag20
(78,251 real changes made)
(1,315 real changes made, 21 to missing)
(77,371 real changes made)
(2,194 real changes made, 21 to missing)
(76,930 real changes made)
(2,636 real changes made, 21 to missing)
(76,712 real changes made)
(2,853 real changes made, 21 to missing)
(76,567 real changes made)
(2,997 real changes made, 21 to missing)
(76,661 real changes made)
(2,902 real changes made, 21 to missing)
(76,798 real changes made)
(2,768 real changes made, 21 to missing)
(76,981 real changes made)
(2,584 real changes made, 21 to missing)
(77,120 real changes made)
(2,445 real changes made, 21 to missing)
(77,315 real changes made)
(2,249 real changes made, 21 to missing)
(77,503 real changes made)
(2,063 real changes made, 21 to missing)
(77,604 real changes made)
(1,962 real changes made, 21 to missing)
(77,732 real changes made)
(1,833 real changes made, 21 to missing)
(77,910 real changes made)
(1,655 real changes made, 21 to missing)
(77,970 real changes made)
(1,596 real changes made, 21 to missing)
(78,095 real changes made)
(1,471 real changes made, 21 to missing)
(78,302 real changes made)
(1,263 real changes made, 21 to missing)
(78,370 real changes made)
(1,196 real changes made, 21 to missing)
(78,469 real changes made)
(1,097 real changes made, 21 to missing)
(78,583 real changes made)
(983 real changes made, 21 to missing)
(77,184 real changes made)
(2,382 real changes made, 21 to missing)
(77,521 real changes made)
(2,044 real changes made, 21 to missing)
(78,050 real changes made)
(1,515 real changes made, 21 to missing)
(78,365 real changes made)
(1,200 real changes made, 21 to missing)
(78,649 real changes made)
(917 real changes made, 21 to missing)
(78,854 real changes made)
(712 real changes made, 21 to missing)
(78,972 real changes made)
(593 real changes made, 21 to missing)
(79,073 real changes made)
(493 real changes made, 21 to missing)
(79,175 real changes made)
(391 real changes made, 21 to missing)
(79,245 real changes made)
(321 real changes made, 21 to missing)
(79,239 real changes made)
(327 real changes made, 21 to missing)
(79,307 real changes made)
(259 real changes made, 21 to missing)
(79,351 real changes made)
(215 real changes made, 21 to missing)
(79,369 real changes made)
(197 real changes made, 21 to missing)
(79,423 real changes made)
(143 real changes made, 21 to missing)
(79,427 real changes made)
(139 real changes made, 21 to missing)
(79,455 real changes made)
(111 real changes made, 21 to missing)
(79,467 real changes made)
(99 real changes made, 21 to missing)
(79,493 real changes made)
(73 real changes made, 21 to missing)
(79,492 real changes made)
(74 real changes made, 21 to missing)
(60,489 missing values generated)
(60,489 real changes made)
N = 79,545; 19,059 unbalanced groups of sizes 2 to 48
(dropped 1198 singleton observations)
(MWFE estimator converged in 21 iterations)
note: lead20 omitted because of collinearity

HDFE Linear regression                            Number of obs   =     69,204
Absorbing 6 HDFE groups                           F(  40,    195) =      26.26
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.6581
                                                  Adj R-squared   =     0.5262
                                                  Within R-sq.    =     0.0093
Number of clusters (msa)     =        196         Root MSE        =     1.6401

                                  (Std. err. adjusted for 196 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       lag20 |  -.3492272   .2061183    -1.69   0.092    -.7557345      .05728
       lag19 |  -.5720014   .1710949    -3.34   0.001    -.9094355   -.2345672
       lag18 |  -.6013769   .3059956    -1.97   0.051    -1.204863    .0021089
       lag17 |  -.3781038   .1931554    -1.96   0.052    -.7590457     .002838
       lag16 |  -.6571123   .1622332    -4.05   0.000    -.9770693   -.3371554
       lag15 |  -.3813775   .1305701    -2.92   0.004    -.6388883   -.1238666
       lag14 |  -.2198579   .1438277    -1.53   0.128    -.5035154    .0637996
       lag13 |  -.4527518   .1415205    -3.20   0.002    -.7318592   -.1736444
       lag12 |  -.5098836   .0977159    -5.22   0.000    -.7025993   -.3171678
       lag11 |  -.4467667   .1812693    -2.46   0.015    -.8042668   -.0892666
       lag10 |  -.4720978   .1136465    -4.15   0.000     -.696232   -.2479636
        lag9 |  -.3438234   .1141922    -3.01   0.003    -.5690337   -.1186131
        lag8 |  -.4491055   .1191236    -3.77   0.000    -.6840415   -.2141695
        lag7 |  -.2992897   .0963271    -3.11   0.002    -.4892663    -.109313
        lag6 |  -.4045536   .0786214    -5.15   0.000     -.559611   -.2494963
        lag5 |  -.4121302   .0894297    -4.61   0.000    -.5885039   -.2357565
        lag4 |  -.3928614   .0894968    -4.39   0.000    -.5693673   -.2163555
        lag3 |  -.4010804   .0610959    -6.56   0.000    -.5215741   -.2805868
        lag2 |  -.3919308   .0588739    -6.66   0.000    -.5080422   -.2758194
        lag1 |  -.3855849   .0500767    -7.70   0.000    -.4843463   -.2868235
       treat |  -.5318622    .063886    -8.33   0.000    -.6578585   -.4058659
       lead1 |  -.2143326   .0698129    -3.07   0.002    -.3520179   -.0766473
       lead2 |  -.2695091    .075663    -3.56   0.000    -.4187321   -.1202862
       lead3 |   -.210574   .0648805    -3.25   0.001    -.3385315   -.0826165
       lead4 |  -.1991205   .0784277    -2.54   0.012     -.353796    -.044445
       lead5 |  -.2104884   .0760527    -2.77   0.006    -.3604798   -.0604971
       lead6 |  -.1652514   .0713577    -2.32   0.022    -.3059833   -.0245195
       lead7 |  -.1798577   .0916962    -1.96   0.051    -.3607012    .0009858
       lead8 |  -.1462759   .0681873    -2.15   0.033    -.2807553   -.0117966
       lead9 |  -.1028733   .0649795    -1.58   0.115    -.2310261    .0252794
      lead10 |   -.074792   .0645578    -1.16   0.248    -.2021132    .0525292
      lead11 |   -.083579   .0702686    -1.19   0.236     -.222163    .0550049
      lead12 |  -.0865564   .0806607    -1.07   0.285    -.2456357    .0725229
      lead13 |  -.1116706   .0882514    -1.27   0.207    -.2857203    .0623792
      lead14 |  -.0767074   .0657921    -1.17   0.245    -.2064629     .053048
      lead15 |  -.0349025   .0747538    -0.47   0.641    -.1823322    .1125271
      lead16 |  -.0745121   .0672975    -1.11   0.270    -.2072364    .0582122
      lead17 |   .0099381   .0720317     0.14   0.890    -.1321231    .1519993
      lead18 |  -.0130897   .0678657    -0.19   0.847    -.1469346    .1207552
      lead19 |  -.0830225   .0729166    -1.14   0.256    -.2268289    .0607838
      lead20 |          0  (omitted)
       _cons |   -2.85979   .0017182 -1664.43   0.000    -2.863178   -2.856401
------------------------------------------------------------------------------

Absorbed degrees of freedom:
------------------------------------------------------+
  Absorbed FE | Categories  - Redundant  = Num. Coefs |
--------------+---------------------------------------|
         year |        77           0          77     |
        field |         5           1           4     |
          msa |       196         196           0    *|
   field#year |       344          77         267    ?|
    field#msa |       695         695           0    *|
      athr_id |     17996           1       17995    ?|
------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(79,504 observations deleted)
(40 missing values generated)
(40 real changes made)
(1 observation deleted)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
           b |         19   -.0425905    .1041509  -.2715275   .1657269

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
           b |         19    .2631019    .0766757   .1160757    .395523
(note:  named style none not found in class margin, default attributes used)
file ../output/figures/es1945_2023_year_firstlast.pdf saved as PDF format
(49,583 missing values generated)
(38776 real changes made)
(10,807 missing values generated)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            52,707  
    -----------------------------------------
(93 missing values generated)
(51,076 missing values generated)
(51,761 missing values generated)
(51,297 missing values generated)
(51,085 missing values generated)
(51,681 missing values generated)
(50,732 missing values generated)
(51,934 missing values generated)
(50,605 missing values generated)
(52,125 missing values generated)
(50,457 missing values generated)
(52,259 missing values generated)
(50,584 missing values generated)
(52,341 missing values generated)
(50,720 missing values generated)
(52,422 missing values generated)
(50,836 missing values generated)
(52,494 missing values generated)
(50,987 missing values generated)
(52,544 missing values generated)
(51,135 missing values generated)
lead1   lead3   lead5   lead7   lead9   lag1    lag3    lag5    lag7    lag9
lead2   lead4   lead6   lead8   lead10  lag2    lag4    lag6    lag8    lag10
(51,761 real changes made)
(959 real changes made, 13 to missing)
(51,085 real changes made)
(1,634 real changes made, 13 to missing)
(50,732 real changes made)
(1,988 real changes made, 13 to missing)
(50,605 real changes made)
(2,114 real changes made, 13 to missing)
(50,457 real changes made)
(2,262 real changes made, 13 to missing)
(50,584 real changes made)
(2,134 real changes made, 13 to missing)
(50,720 real changes made)
(2,000 real changes made, 13 to missing)
(50,836 real changes made)
(1,883 real changes made, 13 to missing)
(50,987 real changes made)
(1,732 real changes made, 13 to missing)
(51,135 real changes made)
(1,584 real changes made, 13 to missing)
(51,076 real changes made)
(1,644 real changes made, 13 to missing)
(51,297 real changes made)
(1,422 real changes made, 13 to missing)
(51,681 real changes made)
(1,039 real changes made, 13 to missing)
(51,934 real changes made)
(786 real changes made, 13 to missing)
(52,125 real changes made)
(595 real changes made, 13 to missing)
(52,259 real changes made)
(461 real changes made, 13 to missing)
(52,341 real changes made)
(379 real changes made, 13 to missing)
(52,422 real changes made)
(298 real changes made, 13 to missing)
(52,494 real changes made)
(226 real changes made, 13 to missing)
(52,544 real changes made)
(176 real changes made, 13 to missing)
(38,638 missing values generated)
(38,638 real changes made)
N = 52,707; 14,071 unbalanced groups of sizes 2 to 34
(dropped 2574 singleton observations)
(MWFE estimator converged in 22 iterations)
note: lead10 omitted because of collinearity

HDFE Linear regression                            Number of obs   =     36,515
Absorbing 6 HDFE groups                           F(  20,    173) =      12.46
Statistics robust to heteroskedasticity           Prob > F        =     0.0000
                                                  R-squared       =     0.7013
                                                  Adj R-squared   =     0.5432
                                                  Within R-sq.    =     0.0061
Number of clusters (msa)     =        174         Root MSE        =     1.6704

                                  (Std. err. adjusted for 174 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
       lag10 |  -.4472287   .1307697    -3.42   0.001    -.7053382   -.1891192
        lag9 |    -.24772   .1339024    -1.85   0.066    -.5120126    .0165726
        lag8 |  -.4530192   .1153724    -3.93   0.000    -.6807379   -.2253005
        lag7 |  -.2258967   .0767349    -2.94   0.004    -.3773539   -.0744395
        lag6 |   -.369823    .108918    -3.40   0.001    -.5848022   -.1548438
        lag5 |   -.331106   .0890109    -3.72   0.000    -.5067931   -.1554188
        lag4 |  -.4030244   .0925342    -4.36   0.000    -.5856657   -.2203831
        lag3 |  -.3772329   .0806045    -4.68   0.000    -.5363278   -.2181381
        lag2 |  -.3998692   .0669693    -5.97   0.000    -.5320513   -.2676872
        lag1 |  -.3551821   .0737095    -4.82   0.000    -.5006678   -.2096963
       treat |  -.4286696   .0560655    -7.65   0.000      -.53933   -.3180091
       lead1 |  -.1718176   .0866576    -1.98   0.049    -.3428598   -.0007754
       lead2 |  -.2430295   .0825487    -2.94   0.004    -.4059617   -.0800974
       lead3 |  -.1672485    .054064    -3.09   0.002    -.2739586   -.0605385
       lead4 |  -.1260065   .0666325    -1.89   0.060    -.2575239    .0055108
       lead5 |  -.1249176   .0487244    -2.56   0.011    -.2210884   -.0287467
       lead6 |  -.1008119   .0717554    -1.40   0.162    -.2424407    .0408169
       lead7 |  -.1141463   .0654464    -1.74   0.083    -.2433226      .01503
       lead8 |  -.0773628   .0513931    -1.51   0.134     -.178801    .0240753
       lead9 |    .001864   .0693962     0.03   0.979    -.1351084    .1388363
      lead10 |          0  (omitted)
       _cons |  -2.616143   .0088356  -296.09   0.000    -2.633583   -2.598704
------------------------------------------------------------------------------

Absorbed degrees of freedom:
------------------------------------------------------+
  Absorbed FE | Categories  - Redundant  = Num. Coefs |
--------------+---------------------------------------|
         year |        38           0          38     |
        field |         5           1           4     |
          msa |       174         174           0    *|
   field#year |       187          38         149    ?|
    field#msa |       639         639           0    *|
      athr_id |     11614           1       11613    ?|
------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(52,686 observations deleted)
(20 missing values generated)
(20 real changes made)
(1 observation deleted)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
           b |          9   -.0064757     .080231  -.0978371   .1292854

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
           b |          9    .2303513    .0679845   .1121525    .357046
(note:  named style none not found in class margin, default attributes used)
file ../output/figures/es1985_2023_year_firstlast.pdf saved as PDF format

. 
end of do-file

--------------------------------------------------------------------------------
Makelog ended: 2023-12-24 23:03:21
Working directory: /export/home/dor/cxu/innovation_projs/analysis/science_geo/mover_analysis/code
--------------------------------------------------------------------------------
