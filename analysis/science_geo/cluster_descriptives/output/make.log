--------------------------------------------------------------------------------
Makelog started: 2024-01-25 23:59:27
Working directory: /export/home/dor/cxu/innovation_projs/analysis/science_geo/cluster_descriptives/code
--------------------------------------------------------------------------------
External links successfully created!

  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      17.0
___/   /   /___/   /   /___/       MP—Parallel Edition

 Statistics and Data Science       Copyright 1985-2021 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-STATA-PC        https://www.stata.com
                                   979-696-4600        stata@stata.com

Stata license: Unlimited-user 4-core network, expiring 17 Nov 2024
Serial number: 501809301897
  Licensed to: Harvard Business School
               Research Computing

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. More than 2 billion observations are allowed; see help obs_advice.
      4. Maximum number of variables is set to 120,000; see help set_maxvar.

. do "/export/home/dor/cxu/innovation_projs/analysis/science_geo/cluster_descri
> ptives/code/analysis.do" 

. set more off 

. clear all

. capture log close

. program drop _all

. set scheme modern

. graph set window fontface "Arial Narrow"
not available in non-GUI version

. pause on

. set seed 8975

. global cite_affl_wt_name "Productivity"

. global impact_cite_affl_wt_name "Productivity"

. global body_adj_wt_name "Paper-to-Patent Citations"

. global ln_y_name "Log Productivity"

. global ln_pat_name "Log Paper-to-Patent Citations"

. global msa_size_name "Cluster Size"

. global ln_x_name "Log Cluster Size"

. global time year

. global year_insts "/export/scratch/cxu_sci_geo/clean_athr_inst_hist_output"

. 
. 
. program main
  1.     foreach s in year_firstlast {
  2.         sample_desc, samp(`s')
  3.         maps, samp(`s')
  4.         raw_bs, samp(`s')
  5.         regression, samp(`s')
  6.         firm_externalities, samp(`s')
  7.         output_tables, samp(`s')
  8.     }
  9. end

. 
. program sample_desc
  1.     syntax, samp(str) 
  2.     use ../external/econs_samp/athr_panel_full_comb_year.dta, clear
  3.     gcollapse (mean) msa_size, by(msa_comb)
  4.     rename msa_size econ_msa_size
  5.     save ../temp/econs_cluster, replace
  6.     use if !mi(msa_comb) & inrange(year, 1945,2022) using ../external/samp
> /athr_panel_full_comb_`samp', clear 
  7.     count
  8.     gunique athr_id
  9.     gen ln_y = ln(impact_cite_affl_wt)
 10.     gen ln_x = ln(msa_size)
 11.     gen ln_pat = ln(body_adj_wt)
 12.     foreach var in impact_cite_affl_wt msa_size ln_y ln_x body_adj_wt ln_p
> at {
 13.         qui sum `var', d
 14.         local N = r(N)
 15.         local mean : dis %3.2f r(mean)
 16.         local sd : dis %3.2f r(sd)
 17.         local p5 :  dis %3.2f r(p5)
 18.         local p25 :  dis %3.2f r(p25)
 19.         local p50 :  dis %3.2f r(p50)
 20.         local p75 :  dis %3.2f r(p75)
 21.         local p95 :  dis %3.2f r(p95)
 22.         tw hist `var', frac ytitle("Share of author-years", size(vsmall)) 
> xtitle("${`var'_name}", size(vsmall)) color(edkblue) xlab(, labsize(vsmall)) 
> ylab(, labsize(vsmall)) legend(on order(- "N = `N'" ///
>                                                                 "Mean = `mean
> '" ///
>                                                                 "            
> (`sd')" ///
>                                                                 "p5 = `p5'" /
> //
>                                                                 "p25 = `p25'"
>  ///
>                                                                 "p50 = `p50'"
>  ///
>                                                                 "p75 = `p75'"
>  ///
>                                                                 "p95 = `p95'"
> ) pos(1) ring(0) size(vsmall) region(fcolor(none)))
 23.         *graph export ../output/figures/`var'_dist`samp'.pdf, replace
.     }
 24.     preserve
 25.     keep if inrange(year, 2015,2022)
 26.     gcollapse (mean) msa_size cluster_shr, by(msa_comb)
 27.     gsort -msa_size
 28.     mkmat msa_size in 1/30, mat(top_30clus_`samp')
 29.     li in 1/30
 30.     mkmat msa_size in 1/10, mat(top_10clus_`samp')
 31.     restore
 32.     preserve
 33.     gen has_patent_cite = pat_wt > 0
 34.     bys athr_id msa_comb: gen athr_cnt = _n == 1
 35.     gcollapse  (sum) athr_cnt body_adj_wt cite_affl_wt pat_wt affl_wt impa
> ct_cite_affl_wt impact_affl_wt (mean) msa_size has_patent_cite, by(msa_comb)
 36.     merge 1:1 msa_comb using ../temp/econs_cluster, assert(1 2 3) keep(1 3
> ) nogen
 37. 
.     qui reg body_adj_wt impact_cite_affl_wt 
 38.     local coef : dis %3.2f _b[impact_cite_affl_wt]
 39.     local N = e(N)
 40.     binscatter2 body_adj_wt impact_cite_affl_wt , xtitle("Productivity", s
> ize(vsmall)) ytitle("Paper-to-Patent Citations", size(vsmall)) lcolor(ebblue)
>  mcolor(gs3) xlab(, labsize(vsmall)) ylab(, labsize(vsmall)) legend(on order(
> - "N (MSAs) = `N'" ///
>                                                                              
>                                          "Slope = `coef'") pos(5) ring(0) reg
> ion(fcolor(none)) size(vsmall))
 41.     *graph export ../output/figures/msa_pat_prod_`samp'.pdf, replace
.     gen ln_pat = ln(body_adj_wt)
 42.     gen ln_y = ln(impact_cite_affl_wt)
 43.     qui reg ln_pat ln_y 
 44.     local coef : dis %3.2f _b[ln_y]
 45.     local N = e(N)
 46.     binscatter2 ln_pat ln_y , xtitle("Log Productivity", size(vsmall)) yti
> tle("Log Paper-to-Patent Citations", size(vsmall)) lcolor(ebblue) mcolor(gs3)
>   xlab(, labsize(vsmall)) ylab(, labsize(vsmall)) legend(on order(- "N (MSAs)
>  = `N'" ///
>                                                                              
>                                          "Slope = `coef'") pos(5) ring(0) reg
> ion(fcolor(none)) size(vsmall))
 47.     *graph export ../output/figures/msa_log_pat_prod_`samp'.pdf, replace
.     
.     xtile p  = msa_size, nq(20)
 48.     gen msa_lab = "" 
 49.    replace msa_lab =  msa_comb if msa_comb == "San Diego-Carlsbad, CA" 
 50.    replace msa_lab =  msa_comb if msa_comb == "Bay Area, CA" 
 51.    replace msa_lab =  msa_comb if msa_comb == "St. Louis, MO-IL" 
 52.    replace msa_lab =  msa_comb if msa_comb == "Minneapolis-St. Paul-Bloomi
> ngton, MN-WI" 
 53.    replace msa_lab =  msa_comb if msa_comb == "Washington-Arlington-Alexan
> dria, DC-VA-MD-WV" 
 54.    replace msa_lab =  msa_comb if msa_comb == "Los Angeles-Long Beach-Anah
> eim, CA" 
 55.    replace msa_lab =  msa_comb if msa_comb == "Boston-Cambridge-Newton, MA
> -NH" 
 56.    replace msa_lab =  msa_comb if msa_comb == "New York-Newark-Jersey City
> , NY-NJ-PA" 
 57.     replace msa_lab =  msa_comb  if msa_comb == "New Haven-Milford , CT" 
 58.    egen clock = mlabvpos(msa_size econ_msa_size)
 59.    replace clock = 9 if inlist(msa_lab , "New York-Newark-Jersey City, NY-
> NJ-PA","Boston-Cambridge-Newton, MA-NH", "Washington-Arlington-Alexandria, DC
> -VA-MD-WV")
 60.    replace clock = 3 if inlist(msa_lab , "Minneapolis-St. Paul-Bloomington
> , MN-WI", "San Diego-Carlsbad, CA", "St. Louis, MO-IL", "Bay Area, CA")
 61.     tw scatter impact_cite_affl_wt msa_size , mcolor(gs7%50) msize(vsmall)
>  xlabel(#10, labsize(vsmall)) ylab(#10, labsize(vsmall)) || scatter impact_ci
> te_affl_wt msa_size if !mi(msa_lab) , mcolor(ebblue) msize(vsmall)  mlabel(ms
> a_lab) mlabcolor(black) mlabsize(tiny) xtitle("MSA Cluster Size", size(vsmall
> )) ytitle("MSA Productivity", size(vsmall))  jitter(5) legend(off)
 62.    *graph export ../output/figures/cluster_prod_scatter_`samp'.pdf, replac
> e
.     corr msa_size econ_msa_size 
 63.     local slope : dis %3.2f r(rho) 
 64.     reg msa_size econ_msa_size
 65.     local N = e(N)
 66.     tw scatter msa_size econ_msa_size, mcolor(gs7%50) msize(vsmall) xlabel
> (#10, labsize(vsmall)) ylab(#10, labsize(vsmall)) || ///
>        scatter msa_size econ_msa_size if !mi(msa_lab) , mcolor(ebblue) mlabvp
> (clock) msize(vsmall)  mlabel(msa_lab) mlabcolor(black) mlabsize(tiny) || ///
>        (function y = _b[econ_msa_size]*x + _b[_cons], range(0 900) lpattern(d
> ash) lcolor(lavender)), ytitle("Fundamental Science Cluster Size", size(vsmal
> l)) xtitle("Economics Research Cluster Size", size(vsmall))  legend(on order 
> (- "N (MSAs) = `N'" ///
>                                                                              
>                                                                              
>                     "Correlation = `slope'") pos(5) ring(0) region(fcolor(non
> e)) size(vsmall) lwidth(none))
 67.     graph export ../output/figures/econ_v_ls_`samp'.pdf, replace
 68.     drop clock
 69.    xtile p_prod = impact_cite_affl_wt, nq(20)
 70.    replace msa_lab = ""
 71.    replace msa_lab =  msa_comb if msa_comb == "San Diego-Carlsbad, CA" 
 72.    replace msa_lab =  msa_comb if msa_comb == "Bay Area, CA" 
 73.    replace msa_lab =  msa_comb if msa_comb == "St. Louis, MO-IL" 
 74.    replace msa_lab =  msa_comb if msa_comb == "Minneapolis-St. Paul-Bloomi
> ngton, MN-WI" 
 75.    replace msa_lab =  msa_comb if msa_comb == "Washington-Arlington-Alexan
> dria, DC-VA-MD-WV" 
 76.    replace msa_lab =  msa_comb if msa_comb == "Los Angeles-Long Beach-Anah
> eim, CA" 
 77.    replace msa_lab =  msa_comb if msa_comb == "Boston-Cambridge-Newton, MA
> -NH" 
 78.    replace msa_lab =  msa_comb if msa_comb == "New York-Newark-Jersey City
> , NY-NJ-PA" 
 79.    egen clock = mlabvpos(impact_cite_affl_wt body_adj_wt)
 80.    replace clock = 9 if inlist(msa_lab , "New York-Newark-Jersey City, NY-
> NJ-PA","Boston-Cambridge-Newton, MA-NH")
 81.    replace clock = 3 if inlist(msa_lab , "Minneapolis-St. Paul-Bloomington
> , MN-WI", "Washington-Arlington-Alexandria, DC-VA-MD-WV", "San Diego-Carlsbad
> , CA", "St. Louis, MO-IL", "Bay Area, CA")
 82.    qui reg body_adj_wt impact_cite_affl_wt 
 83.    local coef : dis %3.2f _b[impact_cite_affl_wt]
 84.    local cons : dis %3.2f _b[_cons]
 85.    local N = e(N)
 86.    tw scatter body_adj_wt impact_cite_affl_wt  , mcolor(gs13%50) msize(vsm
> all) xlabel(0(5000)60000, labsize(vsmall)) ylab(0(5000)60000, labsize(vsmall)
> ) || ///
>       scatter body_adj_wt impact_cite_affl_wt if !mi(msa_lab) , mlabvp(clock)
>  mcolor(ebblue) msize(vsmall)  mlabel(msa_lab) mlabcolor(black) mlabsize(tiny
> ) || ///
>       (function y=_b[impact_cite_affl_wt]*x+_b[_cons] , range(0 60000) lpatte
> rn(dash) lcolor(lavender)), xtitle("MSA Productivity", size(vsmall)) ytitle("
> MSA Paper-to-Patent Citations", size(vsmall)) legend(on order(- "N (MSAs) = `
> N'" ///
>                                                                              
>                                          "Slope = `coef'") pos(5) ring(0) reg
> ion(fcolor(none)) size(vsmall))
 87.    graph export ../output/figures/pat_prod_scatter_`samp'.pdf, replace
 88.    /*hashsort p -cite_affl_wt 
>    by p: egen mean_msa = mean(msa_size)
>    by p: egen mean_cite = mean(cite_affl_wt)
>    hashsort p -cite_affl_wt  
>    gduplicates drop p mean_msa mean_cite, force
>    drop msa_lab
>    gen msa_lab = msa_comb + " " + string(${time})  + "p"+string(p)
>    qui reg mean_cite mean_msa
>    local coef : dis %3.2f _b[mean_msa]
>    tw scatter mean_cite mean_msa, mcolor(ebblue) msize(vsmall) xlabel(#10, la
> bsize(vsmall)) ylab(#10, labsize(vsmall))  mlabel(msa_lab) mlabcolor(black) m
> labsize(tiny) xtitle("MSA Size in Year", size(vsmall)) ytitle("Average Effect
> ive Output", size(vsmall)) legend(on order(- "Slope = `coef'") pos(5) ring(0)
>  size(vsmall))
>    *graph export ../output/figures/binscatter_`samp'.pdf, replace
>    restore*/
.     
. /*    preserve
>     keep if inrange(year , 2015,2022)
>     gcollapse (mean) msa_size cluster_shr, by(msa_comb)
>     gsort - msa_size
>     mkmat msa_size in 1/30, mat(top_30clus_`samp')
>     li in 1/30
>     mkmat msa_size in 1/10, mat(top_10clus_`samp')
>     restore*/
. /*    gcollapse (mean) msa_size_field field_cluster_shr, by(msa_comb field)
>     forval i = 0/4 {
>         preserve
>         keep if field ==`i'
>         gsort -msa_size_field
>         li in 1/10
>         restore
>     }*/
. 
. end

. 
. program  maps
  1.     syntax, samp(str) 
  2.     spshape2dta ../external/geo/cb_2018_us_state_500k.shp, replace saving(
> usa_state)
  3.     use usa_state_shp, clear
  4.     merge m:1 _ID using usa_state
  5.     destring STATEFP, replace
  6.     drop if STATEFP > 56
  7.     // alaska
.     drop if _X > 0 & !mi(_X) & STATEFP == 2  
  8.     geo2xy _Y _X if STATEFP ==2, proj(mercator) replace
  9.     replace _Y = _Y / 5 +1200000 if STATEFP == 2 
 10.     replace _X = _X / 5 - 2000000  if STATEFP == 2 
 11.     drop if _X < -160 & !mi(_X) & _ID == 43  // small islands to the west
 12.     geo2xy _Y _X if _ID == 43, proj(mercator) replace
 13.     replace _Y = _Y  + 800000 if _ID == 43
 14.     replace _X = _X  - 1200000 if _ID == 43
 15.     geo2xy _Y _X if !inlist(_ID, 28,43), replace proj(mercator)
 16.     replace _X = _X + 53500 if !inlist(_ID, 28,43)
 17.     replace _Y = _Y - 3100 if !inlist(_ID, 28,43)
 18.     drop _CX- _merge
 19.     sort _ID shape_order
 20.     save usa_state_shp_clean.dta, replace
 21.     
.     spshape2dta ../external/geo/cb_2018_us_cbsa_500k.shp, replace saving(usa_
> msa)
 22.     use usa_msa_shp, clear
 23.     merge m:1 _ID using usa_msa, nogen
 24.     destring CBSAFP, replace
 25.     gen state = strtrim(substr(NAME, strpos(NAME, ",")+1, 3))
 26.     drop if inlist(state, "PR")
 27.     // alaska
.     drop if _X > 0 & !mi(_X) & state == "AK" 
 28.     geo2xy _Y _X if state == "AK" , proj(mercator) replace
 29.    replace _Y = _Y / 5 + 1200000 if state == "AK"
 30.     replace _X = _X / 5 - 1705000 if state == "AK" 
 31.     drop if _X < -160 & !mi(_X) & state == "HI"  // small islands to the w
> est
 32.     geo2xy _Y _X if state == "HI", proj(mercator) replace
 33.     replace _Y = _Y + 800000 if state == "HI" 
 34.     replace _X = _X  - 1200000 if state == "HI" 
 35.     geo2xy _Y _X if !inlist(state, "AK", "HI"), replace proj(mercator)
 36.     sort _ID shape_order
 37.     save usa_msa_shp_clean.dta, replace
 38. 
.     use if !mi(msa_comb) & inrange(year, 1945, 2022) using ../external/samp/a
> thr_panel_full_`samp', clear
 39. *    bys msa_comb: egen mode = mode(msacode)
. *    replace msacode = mode
.     merge m:1 msacode using ../external/geo/msas, assert(1 2 3) keep(1 3) nog
> en
 40.     replace msa_comb = msatitle if !mi(msatitle)
 41.     replace msa_comb = "San Francisco-Oakland-Hayward, CA" if msa_comb == 
> "San Francisco-Oakland-Haywerd, CA"
 42.     replace msa_comb = "Macon-Bibb County, GA" if msa_comb == "Macon, GA"
 43.     bys athr_id msa_comb ${time} : gen count = _n == 1
 44.     gcollapse (sum) affl_wt impact_cite_affl_wt body_adj_wt (mean) msa_siz
> e , by(msa_comb)
 45.     save ../temp/map_samp, replace
 46.     
.     use usa_msa, clear
 47.     rename NAME msa_comb
 48.     merge 1:m msa_comb using ../temp/map_samp, assert(1 2 3) keep(1 3) nog
> en
 49.     foreach var in impact_cite_affl_wt {
 50.         xtile `var'_5 = `var', nq(5)
 51.         qui sum `var' 
 52.         local min : dis %3.2f r(min)
 53.         local max : dis %3.2f r(max)
 54.         _pctile `var',percentiles(20 40 60 80)
 55.         local p20: dis %3.2f r(r1)
 56.         local p40: dis %3.2f r(r2)
 57.         local p60: dis %3.2f r(r3)
 58.         local p80: dis %3.2f r(r4)
 59.         colorpalette carto Teal, n(5) nograph 
 60.         spmap  `var'_5 using usa_msa_shp_clean,  id(_ID)  fcolor(`r(p)'%50
> ) clnumber(5) ///
>           ocolor(white ..) osize(0.15 ..) ndfcolor(gs13) ndocolor(white ..) n
> dsize(0.15 ..) ndlabel("No data") ///
>           polygon(data("usa_state_shp_clean") ocolor(gs2) osize(0.2) fcolor(e
> ggshell%20)) ///
>           legend(label(2 "Min-p20: `min'-`p20'") label(3 "p20-p40: `p20'-`p40
> '") label(4 "p40-p60: `p40'-`p60'") label(5 "p60-p80: `p60'-`p80'") label(6 "
> p80-Max: `p80'-`max'") pos(4) size(2)) legtitle("${`var'_name}")
 61.         graph export ../output/figures/`var'_map_`samp'.pdf, replace
 62.     }
 63. end

. 
. program raw_bs
  1.     syntax, samp(str) 
  2.     use if !mi(msa_comb) & inrange(year, 1945, 2022) using ../external/sam
> p/athr_panel_full_comb_`samp', clear
  3.     drop if mi(msa_comb) 
  4.     gegen msa = group(msa_comb)
  5.     gen ln_y = ln(impact_cite_affl_wt)
  6.     gen ln_x = ln(msa_size)
  7.     gen ln_pat = ln(body_adj_wt)
  8. 
.     // patented vs productivity
.     qui reg body_adj_wt impact_cite_affl_wt 
  9.     local coef : dis %3.2f _b[impact_cite_affl_wt]
 10.     local N = e(N)
 11.     binscatter2 body_adj_wt impact_cite_affl_wt, xtitle("Productivity", si
> ze(vsmall)) ytitle("Paper-to-Patent Citations", size(vsmall)) xlab(, labsize(
> vsmall)) ylab(, labsize(vsmall)) mcolor(gs5) lcolor(ebblue) legend(on order(-
>  "N (Author-years) = `N'" ///
>                                                                              
>                                          "Slope = `coef'") pos(5) ring(0) reg
> ion(fcolor(none)) size(vsmall))
 12.     *graph export ../output/figures/pat_prod_`samp'.pdf, replace
.     qui reg ln_pat ln_y 
 13.     local coef : dis %3.2f _b[ln_y]
 14.     local N = e(N)
 15.     binscatter2 ln_pat ln_y , xtitle("Log Productivity", size(vsmall)) yti
> tle("Log Paper-to-Patent Citations", size(vsmall)) xlab(, labsize(vsmall)) yl
> ab(, labsize(vsmall)) mcolor(gs5) lcolor(ebblue) legend(on order(- "N (Author
> -years) = `N'" ///
>                                                                              
>                                          "Slope = `coef'") pos(5) ring(0) reg
> ion(fcolor(none)) size(vsmall))
 16.     *graph export ../output/figures/log_pat_prod_`samp'.pdf, replace
. end

. 
. 
. program regression 
  1.     syntax, samp(str) 
  2.     use ../external/econs_samp/athr_panel_full_comb_year.dta, clear
  3.     gcollapse (mean) msa_size, by(msa_comb year)
  4.     rename msa_size econ_msa_size
  5.     save ../temp/econ_yr_cluster, replace
  6. 
.     use if !mi(msa_comb) & inrange(year, 1945, 2022) using ../external/samp/a
> thr_panel_full_comb_`samp', clear 
  7.     gcollapse (mean) msa_size, by(msa_comb year)
  8.     merge 1:1 msa_comb year using ../temp/econ_yr_cluster, keep(3) nogen
  9.     corr msa_size econ_msa_size 
 10.     local slope : dis %3.2f r(rho) 
 11.     reg msa_size econ_msa_size
 12.     local N = e(N)
 13.     gen msa_lab = "" 
 14.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> San Diego-Carlsbad, CA" & year == 1973
 15.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> San Diego-Carlsbad, CA" & year == 19
 16.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> Trenton, NJ" & year == 2019
 17.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> New Haven-Milford , CT" & year == 2012
 18.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> New York-Newark-Jersey City, NY-NJ-PA" & year == 1996
 19.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> Bay Area, CA" & year == 1997 
 20.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> Bay Area, CA" & year == 2015 
 21.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> Boston-Cambridge-Newton, MA-NH" & year == 1997 
 22.     replace msa_lab =  msa_comb + " " + string(${time})   if msa_comb == "
> Boston-Cambridge-Newton, MA-NH" & year == 2012 
 23.     tw scatter msa_size econ_msa_size, mcolor(gs7%50) msize(vsmall) xlabel
> (#10, labsize(vsmall)) ylab(#10, labsize(vsmall)) || ///
>        scatter msa_size econ_msa_size if !mi(msa_lab) , mcolor(ebblue) msize(
> vsmall)  mlabel(msa_lab) mlabcolor(black) mlabsize(tiny) || ///
>        (function y = _b[econ_msa_size]*x + _b[_cons], range(0 1250) lpattern(
> dash) lcolor(lavender)), ytitle("Fundamental Science Cluster Size", size(vsma
> ll)) xtitle("Economics Research Cluster Size", size(vsmall))  legend(on order
>  (- "N (MSAs) = `N'" ///
>                                                                              
>                                                                              
>                     "Correlation = `slope'") pos(5) ring(0) region(fcolor(non
> e)) size(vsmall) lwidth(none))
 24.     
.     use if !mi(msa_comb) & inrange(year, 1945, 2022) using ../external/samp/a
> thr_panel_full_comb_`samp', clear 
 25.     merge m:1 msa_comb year using  ../temp/econ_yr_cluster, assert(1 2 3) 
> keep(1 3) nogen
 26. /*    corr msa_size econ_msa_size 
>     local slope : dis %3.2f r(rho) 
>     binscatter2 msa_size econ_msa_size, mcolor(gs5) lcolor(ebblue) xlab(, lab
> size(vsmall)) ylab(, labsize(vsmall)) ytitle("Fundamental Science Research Cl
> uster Size", size(vsmall)) xtitle("Economics Research Cluster Size", size(vsm
> all)) legend(on order(- "Correlation = `slope'") pos(5) ring(0) lwidth(none) 
> size(vsmall) region(fcolor(none)))
>     graph export ../output/figures/econ_v_ls.pdf, replace*/
.     local reg_eq "ln_y ln_x"
 27.     local mat_est "_b[ln_x] \ _se[ln_x]"
 28. *    local reg_eq = cond("`samp'"=="year","ln_y ln_x avg_team_size","ln_y 
> ln_x") 
. *    local mat_est  = cond("`samp'"=="year","_b[ln_x] \ _se[ln_x] \ _b[avg_te
> am_size] \ _se[ln_x]", "_b[ln_x] \ _se[ln_x]") 
.     bys athr_id msa_comb ${time} : gen count = _n == 1
 29.     replace msa_size = 0.0000000000001 if msa_size == 0
 30.     replace econ_msa_size = 0.0000000000001 if econ_msa_size == 0
 31.     gegen msa = group(msa_comb)
 32.     rename inst inst_name
 33.     gegen inst = group(inst_id)
 34.     gegen msa_field = group(msa field)
 35.     gegen year_field = group(year field)
 36.     gen ln_y = ln(impact_cite_affl_wt)
 37.     gen ln_x = ln(msa_size)
 38.     gen ln_x_econ = ln(econ_msa_size)
 39.     preserve
 40.     keep if inrange(year, 2015, 2022)
 41.     keep if inlist(msa_comb, "Ann Arbor, MI", "San Diego-Carlsbad, CA", "B
> oston-Cambridge-Newton, MA-NH", "Bay Area, CA", "Gainesville, FL")
 42.     foreach m in "Gainesville, FL" "Ann Arbor, MI" "San Diego-Carlsbad, CA
> " "Bay Area, CA" "Boston-Cambridge-Newton, MA-NH" {
 43.         sum impact_cite_affl_wt if msa_comb == "`m'", d
 44.         mat row = (r(min) , r(p5) , r(p10), r(p25), r(p50) , r(p75), r(p90
> ) , r(p95), r(max), r(mean) , r(sd))
 45.         sum msa_size if msa_comb == "`m'" 
 46.         mat row = row , r(mean)
 47.         mat city_stats_`samp' = nullmat(city_stats_`samp') \ (row)
 48.     }
 49.     restore
 50.     reghdfe `reg_eq', noabsorb
 51.     local slope = _b[ln_x]
 52.     if "`samp'" == "year" {
 53.         binscatter2  ln_y ln_x ,controls(avg_team_size) ytitle("Log Output
> ") xtitle("Log Cluster Size") legend(on order(- "Slope = `slope'") pos(5) rin
> g(0) lwidth(none))
 54.         *graph export ../output/figures/bs_`samp'.pdf, replace
.     }
 55.     if "`samp'" == "year_firstlast" {
 56.         binscatter2  ln_y ln_x , ytitle("Log Output") xtitle("Log Cluster 
> Size") legend(on order(- "Slope = `slope'") pos(5) ring(0) lwidth(none))
 57.         *graph export ../output/figures/bs_`samp'.pdf, replace
.     }
 58.     foreach fe in "${time} msa field" "${time} msa field field#${time}" "$
> {time} msa field field#${time} msa#field" "${time} msa field field#${time} ms
> a#field inst" "${time} msa field field#${time} msa#field inst athr_id" {
 59.         reghdfe `reg_eq', absorb(`fe') vce(cluster msa)
 60.         mat coef_`samp' = nullmat(coef_`samp'), (`mat_est' \ . \ . \e(N))
 61.         if "`fe'" == "${time} msa field field#${time} msa#field inst athr_
> id" {
 62.             global final_elasticity = _b[ln_x]
 63.         }
 64.         local slope : dis %3.2f _b[ln_x]
 65.         if "`samp'" == "year" {
 66.             binscatter2  ln_y ln_x ,controls(avg_team_size) absorb(year ms
> a field year_field msa_field athr_id) ytitle("Log Output") xtitle("Log Cluste
> r Size") legend(on order(- "Slope = `slope'") pos(5) ring(0) lwidth(none))
 67.             *graph export ../output/figures/final_bs_`samp'.pdf, replace
.         }
 68.         if "`samp'" == "year_firstlast" {
 69.             binscatter2  ln_y ln_x , absorb(year msa field year_field msa_
> field athr_id) ytitle("Log Output") xtitle("Log Cluster Size") legend(on orde
> r(- "Slope = `slope'") pos(5) ring(0) lwidth(none))
 70.             *graph export ../output/figures/final_bs_`samp'.pdf, replace
.         }
 71.     }
 72.     reghdfe ln_y ln_x_econ, absorb(${time} msa field field#${time} field#m
> sa inst athr_id) vce(cluster msa)
 73.     mat econ_`samp' = nullmat(econ_`samp'), (. \ . \ _b[ln_x_econ] \ _se[l
> n_x_econ] \ e(N))
 74.     mat coef_`samp' = nullmat(coef_`samp') , econ_`samp'
 75.     reghdfe `reg_eq', absorb(year msa athr_id field inst) vce(cluster msa)
 76.     mat field_`samp' = nullmat(field_`samp'), (`mat_est' \ e(N))
 77.     reghdfe `reg_eq', absorb(year msa athr_id gen_mesh1 gen_mesh2 inst) vc
> e(cluster msa)
 78.     mat field_`samp' = nullmat(field_`samp'), (`mat_est' \ e(N))
 79. *    mat alt_spec_`samp' = instyr_`samp' , field_`samp'
. /*    reghdfe `reg_eq', absorb(year msa athr_id qualifier_name1 qualifier_nam
> e2 inst) vce(cluster msa)
>     mat field_`samp' = nullmat(field_`samp'), (`mat_est' \ e(N))
>     reghdfe `reg_eq', absorb(year msa athr_id term1 term2 inst) vce(cluster m
> sa)
>     mat field_`samp' = nullmat(field_`samp'), (`mat_est' \ e(N))*/
. end

. 
. program firm_externalities
  1.     syntax, samp(str)
  2.     // create clusters 
.     use if !mi(msa_comb) & !mi(inst_id) using ${year_insts}/filled_in_panel_y
> ear, clear
  3.     bys inst_id msa_comb year athr_id: gen count = _n == 1
  4.     bys inst_id msa_comb year : egen inst_athrs = total(count) 
  5.     drop count 
  6.     bys msa_comb year athr_id: gen count = _n == 1
  7.     bys msa_comb year : egen msa_size = total(count) 
  8.     drop count
  9.     bys inst_id msa_comb year: gen count = _n == 1
 10.     bys msa_comb year: gegen num_insts = total(count)
 11.     contract msa_comb inst_id inst year inst_athrs msa_size
 12.     bys msa_comb year: egen sum_insts = total(inst_athrs)
 13.     assert sum_insts == msa_size
 14.     drop sum_insts _freq
 15.     save ../temp/inst_cluster_size, replace
 16. 
.     use if !mi(msa_comb) & inrange(year, 1945, 2022) using ../external/samp/a
> thr_panel_full_comb_`samp', clear 
 17.     drop msa_size
 18.     merge m:1 inst_id msa_comb year  using ../temp/inst_cluster_size , ass
> ert(2 3) keep(3) nogen
 19.     contract inst_id inst msa_comb year msa_size inst_athrs 
 20.     gisid inst_id msa_comb year
 21.     drop _freq
 22.     gen wo_inst_cluster = msa_size - inst_athrs
 23.     gen ln_wo_inst = ln(wo_inst_cluster)
 24.     gen ln_cluster_diff = ln(msa_size) - ln_wo_inst 
 25.     gen firm_elasticity = ln_cluster_diff * ${final_elasticity}
 26.     drop if mi(firm_elasticity)
 27.     bys msa_comb year: gen num_insts = _N
 28.     drop if num_insts == 1 
 29.     // pick a year and report some top ones . t = 2018
.     preserve
 30.     keep if year == 2018
 31.     gsort -inst_athrs
 32.     li msa_comb inst inst_athrs msa_size firm_elasticity in 1/10
 33.     mkmat firm_elasticity in 1/10, mat(inst_elasticities_`samp')
 34.     sum firm_elasticity
 35.     restore
 36.     bys msa_comb year: egen tot_firm_elasticity = total(firm_elasticity)
 37.     gen perc = firm_elasticity/tot_firm_elasticity*100
 38.     bys msa_comb year: egen tot = sum(perc)
 39.     assert round(tot) == 100
 40.     drop tot
 41.     keep if inlist(msa_comb, "Boston-Cambridge-Newton, MA-NH", "Bay Area, 
> CA", "Washington-Arlington-Alexandria, DC-VA-MD-WV", "Baltimore-Columbia-Tows
> on, MD")
 42.     glevelsof msa_comb, local(city)
 43.     hashsort msa_comb year -perc
 44.     gen group = 1 if msa_comb == "Baltimore-Columbia-Towson, MD" & inst ==
>  "Johns Hopkins University"
 45.     replace group = 2 if msa_comb == "Baltimore-Columbia-Towson, MD" & ins
> t == "University of Maryland, Baltimore"
 46.     replace group = 3 if msa_comb == "Baltimore-Columbia-Towson, MD" & mi(
> group)
 47.     replace group = 1 if msa_comb == "Boston-Cambridge-Newton, MA-NH" & in
> st == "Harvard University"
 48.     replace group = 2 if msa_comb == "Boston-Cambridge-Newton, MA-NH" & in
> st == "Mass General Brigham"
 49.     replace group = 3 if msa_comb == "Boston-Cambridge-Newton, MA-NH" & in
> st == "Massachusetts Institute of Technology"
 50.     replace group = 4 if msa_comb == "Boston-Cambridge-Newton, MA-NH" & mi
> (group)
 51.     replace group = 1 if msa_comb == "Bay Area, CA" & inst == "Stanford Un
> iversity"
 52.     replace group = 2 if msa_comb == "Bay Area, CA" & inst == "University 
> of California, San Francisco"
 53.     replace group = 3 if msa_comb == "Bay Area, CA" & inst == "University 
> of California, Berkeley"
 54.     replace group = 4 if msa_comb == "Bay Area, CA" & mi(group)
 55.     replace group = 1 if msa_comb == "Washington-Arlington-Alexandria, DC-
> VA-MD-WV" & inst == "National Institutes of Health"
 56.     replace group = 2 if msa_comb == "Washington-Arlington-Alexandria, DC-
> VA-MD-WV" & inst == "National Aeronautics and Space Administration"
 57.     replace group = 3 if msa_comb == "Washington-Arlington-Alexandria, DC-
> VA-MD-WV" & mi(group)
 58.     replace inst = "UCSF" if inst == "University of California, San Franci
> sco"
 59.     replace inst = "UC Berkeley" if inst == "University of California, Ber
> keley"
 60.     replace inst = "MIT" if inst == "Massachusetts Institute of Technology
> "
 61.     foreach c in `city' {
 62.         if "`c'" == "Boston-Cambridge-Newton, MA-NH" local suf "bos"
 63.         if "`c'" == "Bay Area, CA" local suf "bay"
 64.         if "`c'" == "Washington-Arlington-Alexandria, DC-VA-MD-WV" local s
> uf "dc"
 65.         if "`c'" == "Baltimore-Columbia-Towson, MD" local suf "balt"
 66.         preserve
 67.         keep if msa_comb == "`c'"
 68.         collapse (sum) perc (firstnm) inst inst_id, by(msa_comb year group
> )
 69.         hashsort msa_comb year -group
 70.         bys year: gen stack_perc = sum(perc)
 71.         local stacklines
 72.         qui xtset group year
 73.         sum group
 74.         local max_grp = r(max)
 75.         qui levelsof group, local(rank_grps)
 76.         local items = `r(r)'
 77.         foreach x of local rank_grps {
 78.             colorpalette carto Teal, intensify(0.85)  n(`items') nograph
 79.             local stacklines `stacklines' area stack_perc year if group ==
>  `x', fcolor("`r(p`x')'") lcolor(white) lwidth(*0.3) ||
 80.         }
 81.         gen labely = . 
 82.         gen rev_group = -group
 83.         if `max_grp' == 4 {
 84.              qui bys year (rev_group): replace labely = perc/2 if group ==
>  4
 85.              qui bys year (rev_group): replace labely = perc/2 + perc[_n-1
> ] if group == 3
 86.              qui bys year (rev_group): replace labely = perc/2 + perc[_n-1
> ] + perc[_n-2] if group == 2
 87.              qui bys year (rev_group): replace labely = perc/2 + perc[_n-1
> ] + perc[_n-2] + perc[_n-3] if group == 1
 88.         }
 89.         if `max_grp' == 3 {
 90.              qui bys year (rev_group): replace labely = perc/2 if group ==
>  3
 91.              qui bys year (rev_group): replace labely = perc/2 + perc[_n-1
> ] if group == 2
 92.              qui bys year (rev_group): replace labely = perc/2 + perc[_n-1
> ] + perc[_n-2] if group == 1
 93.         }
 94.         gen labely_lab = "Everywhere else" if group == `max_grp'
 95.         replace labely_lab = inst if mi(labely_lab)
 96.         local w = 27
 97.         graph tw `stacklines' (scatter labely year if year == 2022, ms(smc
> ircle) ///
>           msize(0.2) mcolor(black%40) mlabsize(vsmall) mlabcolor(black) mlabe
> l(labely_lab)), ///
>           ytitle("Relative Productivity Spillover Effect in Cluster", size(vs
> mall)) xtitle("Year", size(vsmall)) xlabel(1945(2)2022, angle(45) labsize(vsm
> all)) ylabel(0(10)100, labsize(vsmall)) ///
>           graphregion(margin(r+27)) plotregion(margin(zero)) ///
>           legend(off)
 98.         qui graph export ../output/figures/elasticity_trend_`suf'.pdf , re
> place
 99.         restore
100.     }
101.     hashsort inst_id year
102.     tw line firm_elasticity year if inst == "Harvard University", xlab(194
> 5(5)2022, angle(45) labsize(vsmall)) ylab(0.04(0.02)0.16, labsize(vsmall)) xt
> itle("Year", size(vsmall)) ytitle("Harvard University Productivity Externalit
> y", size(vsmall))
103.     graph export ../output/figures/harvard_elasticity_trend.pdf, replace 
104.     tw line firm_elasticity year if inst == "Massachusetts Institute of Te
> chnology", xlab(1945(5)2022, angle(45) labsize(vsmall)) ylab(0.01(0.01)0.05, 
> labsize(vsmall)) xtitle("Year", size(vsmall)) ytitle("MIT Productivity Extern
> ality", size(vsmall))
105.     graph export ../output/figures/mit_elasticity_trend.pdf, replace 
106.     tw line firm_elasticity year if inst == "Mass General Brigham", xlab(1
> 945(5)2022, angle(45) labsize(vsmall)) ylab(0.01(0.01)0.05, labsize(vsmall)) 
> xtitle("Year", size(vsmall)) ytitle("MGH Productivity Externality", size(vsma
> ll))
107.     graph export ../output/figures/mgh_elasticity_trend.pdf, replace 
108.     
.     hashsort inst_id year
109.     tw line firm_elasticity year if inst == "Stanford University", xlab(19
> 45(5)2022, angle(45) labsize(vsmall)) ylab(0.04(0.01)0.08, labsize(vsmall)) x
> title("Year", size(vsmall)) ytitle("Stanford University Productivity External
> ity", size(vsmall))
110.     graph export ../output/figures/stanford_elasticity_trend.pdf, replace 
111. 
.     hashsort inst_id year
112.     tw line firm_elasticity year if inst == "National Institutes of Health
> ", xlab(1945(5)2022, angle(45) labsize(vsmall)) ylab(0.02(0.02)0.12, labsize(
> vsmall)) xtitle("Year", size(vsmall)) ytitle("NIH Productivity Externality", 
> size(vsmall))
113.     graph export ../output/figures/nih_elasticity_trend.pdf, replace 
114. 
.     hashsort inst_id year
115.     tw line firm_elasticity year if inst == "Johns Hopkins University", xl
> ab(1945(5)2022, angle(45) labsize(vsmall)) ylab(0.20(0.02)0.30, labsize(vsmal
> l)) xtitle("Year", size(vsmall)) ytitle("Johns Hopkins University Productivit
> y Externality", size(vsmall))
116.     graph export ../output/figures/jhu_elasticity_trend.pdf, replace 
117. 
.     hashsort inst_id year
118.     tw line firm_elasticity year if inst == "University of Michigan–Ann Ar
> bor", xlab(1945(5)2022, angle(45) labsize(vsmall)) ylab(0.50(0.05)0.80, labsi
> ze(vsmall)) xtitle("Year", size(vsmall)) ytitle("University of Michigan-Ann A
> rbor Productivity Externality", size(vsmall))
119.     graph export ../output/figures/umich_elasticity_trend.pdf, replace 
120. end

. 
. program output_tables
  1.     syntax, samp(str) 
  2.     foreach file in top_10clus top_30clus coef field city_stats inst_elast
> icities { 
  3.          qui matrix_to_txt, saving("../output/tables/`file'_`samp'.txt") m
> atrix(`file'_`samp') ///
>            title(<tab:`file'_`samp'>) format(%20.4f) replace
  4.     }
  5. end

. ** 
. main
(file ../temp/econs_cluster.dta not found)
file ../temp/econs_cluster.dta saved
  367,533
N = 367,533; 185,374 unbalanced groups of sizes 1 to 48
(2,295 missing values generated)
(8 missing values generated)
(281,639 missing values generated)
(294,794 observations deleted)

     +-----------------------------------------------------------------------+
     |                                       msa_comb    msa_size   cluste~r |
     |-----------------------------------------------------------------------|
  1. |          New York-Newark-Jersey City, NY-NJ-PA   21968.068   .0233035 |
  2. |                 Boston-Cambridge-Newton, MA-NH   20632.938      .0219 |
  3. |   Washington-Arlington-Alexandria, DC-VA-MD-WV   18064.152   .0191008 |
  4. |                                   Bay Area, CA   15358.969   .0163546 |
  5. |             Los Angeles-Long Beach-Anaheim, CA   8992.8233   .0095379 |
     |-----------------------------------------------------------------------|
  6. |    Philadelphia-Camden-Wilmington, PA-NJ-DE-MD   8007.6526   .0085019 |
  7. |             Chicago-Naperville-Elgin, IL-IN-WI   7290.9537   .0077198 |
  8. |                         San Diego-Carlsbad, CA   6881.7731   .0072714 |
  9. |                     Research Triangle Park, NC   6832.3899    .007235 |
 10. |           Houston-The Woodlands-Sugar Land, TX   6536.6355   .0068962 |
     |-----------------------------------------------------------------------|
 11. |                    Seattle-Tacoma-Bellevue, WA   6045.2998   .0064479 |
 12. |                  Baltimore-Columbia-Towson, MD   5617.6017   .0059401 |
 13. |              Atlanta-Sandy Springs-Roswell, GA     5141.96   .0054418 |
 14. |                                  Ann Arbor, MI    3666.932   .0038987 |
 15. |                                 Pittsburgh, PA   3499.1498   .0037015 |
     |-----------------------------------------------------------------------|
 16. |                               St. Louis, MO-IL   3339.6528    .003559 |
 17. |                          New Haven-Milford, CT    3248.456   .0034725 |
 18. |                                    Madison, WI    2872.369   .0030414 |
 19. |                                     Ithaca, NY   2786.1415   .0029634 |
 20. |        Minneapolis-St. Paul-Bloomington, MN-WI   2761.1962   .0029262 |
     |-----------------------------------------------------------------------|
 21. |        Sacramento--Roseville--Arden-Arcade, CA   2640.6106   .0027964 |
 22. |                           Cleveland-Elyria, OH   2563.2336   .0026967 |
 23. | Nashville-Davidson--Murfreesboro--Franklin, TN   2485.5318   .0026277 |
 24. |                Dallas-Fort Worth-Arlington, TX   2468.1792    .002627 |
 25. |                                   Columbus, OH   2349.8801   .0025054 |
     |-----------------------------------------------------------------------|
 26. |                     Denver-Aurora-Lakewood, CO   2238.6043    .002381 |
 27. |                                Gainesville, FL   2159.0266   .0022887 |
 28. |                           Cincinnati, OH-KY-IN   1942.4211   .0020495 |
 29. |      Miami-Fort Lauderdale-West Palm Beach, FL   1907.4023   .0020176 |
 30. |            Portland-Vancouver-Hillsboro, OR-WA   1753.3502   .0018468 |
     +-----------------------------------------------------------------------+

    Result                      Number of obs
    -----------------------------------------
    Not matched                           102
        from master                       102  
        from using                          0  

    Matched                               203  
    -----------------------------------------
(83 missing values generated)
(305 missing values generated)
variable msa_lab was str1 now str22
(1 real change made)
(1 real change made)
(1 real change made)
variable msa_lab was str22 now str39
(1 real change made)
variable msa_lab was str39 now str44
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(0 real changes made)
(102 missing values generated)
(3 real changes made)
(4 real changes made)
(obs=203)

             | msa_size econ_m~e
-------------+------------------
    msa_size |   1.0000
econ_msa_s~e |   0.9402   1.0000


      Source |       SS           df       MS      Number of obs   =       203
-------------+----------------------------------   F(1, 201)       =   1530.60
       Model |   790276209         1   790276209   Prob > F        =    0.0000
    Residual |   103779922       201  516318.021   R-squared       =    0.8839
-------------+----------------------------------   Adj R-squared   =    0.8833
       Total |   894056131       202  4426020.45   Root MSE        =    718.55

------------------------------------------------------------------------------
    msa_size | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
econ_msa_s~e |   21.07079   .5385797    39.12   0.000      20.0088    22.13278
       _cons |   203.6763   53.75973     3.79   0.000      97.6709    309.6817
------------------------------------------------------------------------------
file ../output/figures/econ_v_ls_year_firstlast.pdf saved as PDF format
(8 real changes made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(2 real changes made)
(4 real changes made)
file ../output/figures/pat_prod_scatter_year_firstlast.pdf saved as PDF
    format
  (importing .shp file)
  (importing .dbf file)
  (creating _ID spatial-unit id)
  (creating _CX coordinate)
  (creating _CY coordinate)

  file usa_state_shp.dta created
  file usa_state.dta     created

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           296,043  (_merge==3)
    -----------------------------------------
STATEFP: all characters numeric; replaced as byte
(9,030 observations deleted)
(344 observations deleted)
(116,302 real changes made)
(116,302 real changes made)
(310 observations deleted)
(2,373 real changes made)
(2,373 real changes made)
(166,263 real changes made)
(166,263 real changes made)
file usa_state_shp_clean.dta saved
  (importing .shp file)
  (importing .dbf file)
  (creating _ID spatial-unit id)
  (creating _CX coordinate)
  (creating _CY coordinate)

  file usa_msa_shp.dta created
  file usa_msa.dta     created

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           408,279  
    -----------------------------------------
CBSAFP: all characters numeric; replaced as long
(5,831 observations deleted)
(0 observations deleted)
(7,520 real changes made)
(7,520 real changes made)
(310 observations deleted)
(2,373 real changes made)
(2,373 real changes made)
file usa_msa_shp_clean.dta saved
(variable msatitle was str46, now str50 to accommodate using data's values)
(variable city was str35, now str42 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,364
        from master                     5,364  
        from using                          0  

    Matched                           362,169  
    -----------------------------------------
(33,938 real changes made)
(0 real changes made)
(26 real changes made)
(file ../temp/map_samp.dta not found)
file ../temp/map_samp.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                           638
        from master                       638  
        from using                          0  

    Matched                               307  
    -----------------------------------------
file ../output/figures/impact_cite_affl_wt_map_year_firstlast.pdf saved as
    PDF format
(0 observations deleted)
(2,295 missing values generated)
(8 missing values generated)
(281,639 missing values generated)
(file ../temp/econ_yr_cluster.dta not found)
file ../temp/econ_yr_cluster.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                             4,701  
    -----------------------------------------
(obs=4,701)

             | msa_size econ_m~e
-------------+------------------
    msa_size |   1.0000
econ_msa_s~e |   0.9171   1.0000


      Source |       SS           df       MS      Number of obs   =     4,701
-------------+----------------------------------   F(1, 4699)      =  24868.37
       Model |  3.5135e+10         1  3.5135e+10   Prob > F        =    0.0000
    Residual |  6.6389e+09     4,699  1412830.42   R-squared       =    0.8411
-------------+----------------------------------   Adj R-squared   =    0.8410
       Total |  4.1774e+10     4,700  8888018.33   Root MSE        =    1188.6

------------------------------------------------------------------------------
    msa_size | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
econ_msa_s~e |   19.32749   .1225609   157.70   0.000     19.08722    19.56777
       _cons |   104.4033   19.82922     5.27   0.000     65.52871    143.2779
------------------------------------------------------------------------------
(4,701 missing values generated)
variable msa_lab was str1 now str27
(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)
variable msa_lab was str27 now str42
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,267
        from master                    45,267  
        from using                          0  

    Matched                           322,266  
    -----------------------------------------
(8 real changes made)
(11 real changes made)
(2,295 missing values generated)
(45,267 missing values generated)
(294,794 observations deleted)
(57,442 observations deleted)

                  (sum) impact_cite_affl_wt
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%     .0009203              0
10%     .0018406              0       Obs                 676
25%     .0036812              0       Sum of wgt.         676

50%     .0073625                      Mean           .1656336
                        Largest       Std. dev.      .9641591
75%     .0161974       3.637744
90%     .0657363       4.156103       Variance       .9296028
95%     .4999015       6.721949       Skewness       14.20298
99%     3.616452       19.99029       Kurtosis       271.1231

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    msa_size |        676    2159.027     139.369       1786       2263

                  (sum) impact_cite_affl_wt
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%     .0012271              0
10%     .0022087              0       Obs                 985
25%     .0049587              0       Sum of wgt.         985

50%      .012751                      Mean           .9853974
                        Largest       Std. dev.      4.249258
75%      .153178       40.60669
90%     1.861172       44.89216       Variance       18.05619
95%     4.526474       51.73371       Skewness       8.168456
99%     19.68128         57.016       Kurtosis       83.87337

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    msa_size |        985    3666.932    273.6121       3004       3915

                  (sum) impact_cite_affl_wt
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%     .0016529              0
10%     .0033058              0       Obs               2,168
25%     .0081816              0       Sum of wgt.       2,168

50%     .0548504                      Mean           1.891496
                        Largest       Std. dev.      5.874408
75%     1.560341        59.0652
90%     4.436334        59.0652       Variance       34.50866
95%     8.508016       64.35387       Skewness       10.23855
99%     28.63573       141.9804       Kurtosis       179.2067

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    msa_size |      2,168    6881.773    658.5043       5337       7464

                  (sum) impact_cite_affl_wt
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%     .0018406              0
10%     .0036812              0       Obs               5,044
25%     .0089401              0       Sum of wgt.       5,044

50%     .3983848                      Mean           2.851947
                        Largest       Std. dev.      11.01276
75%     2.308903       181.6684
90%     6.980129       202.2141       Variance        121.281
95%     12.07677        368.757       Skewness       19.37246
99%     32.98954        368.757       Kurtosis       548.6113

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    msa_size |      5,044    15358.97    792.5829      13210      15943

                  (sum) impact_cite_affl_wt
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%     .0018406              0
10%     .0033131              0       Obs               6,424
25%     .0087429              0       Sum of wgt.       6,424

50%     .3537764                      Mean           2.793774
                        Largest       Std. dev.      7.768215
75%     2.544687        126.395
90%      6.94017       167.0986       Variance       60.34517
95%     12.69272       167.0986       Skewness        10.1064
99%     32.46129       202.1652       Kurtosis       177.0758

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
    msa_size |      6,424    20632.94    1462.599      16880      21662
(MWFE estimator converged in 1 iterations)

HDFE Linear regression                            Number of obs   =    365,238
Absorbing 1 HDFE group                            F(   1, 365236) =   19919.31
                                                  Prob > F        =     0.0000
                                                  R-squared       =     0.0517
                                                  Adj R-squared   =     0.0517
                                                  Within R-sq.    =     0.0517
                                                  Root MSE        =     2.2927

------------------------------------------------------------------------------
        ln_y | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |   .3759362   .0026636   141.14   0.000     .3707156    .3811569
       _cons |  -6.113987   .0216509  -282.39   0.000    -6.156422   -6.071552
------------------------------------------------------------------------------
(dropped 22 singleton observations)
(MWFE estimator converged in 7 iterations)

HDFE Linear regression                            Number of obs   =    365,216
Absorbing 3 HDFE groups                           F(   1,    282) =       3.60
Statistics robust to heteroskedasticity           Prob > F        =     0.0588
                                                  R-squared       =     0.1642
                                                  Adj R-squared   =     0.1634
                                                  Within R-sq.    =     0.0003
Number of clusters (msa)     =        283         Root MSE        =     2.1535

                                  (Std. err. adjusted for 283 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |    .203591   .1073019     1.90   0.059    -.0076234    .4148054
       _cons |  -4.734805   .8587325    -5.51   0.000    -6.425145   -3.044466
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |        78           0          78     |
         msa |       283         283           0    *|
       field |         5           1           4     |
-----------------------------------------------------+
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 31 singleton observations)
(MWFE estimator converged in 5 iterations)

HDFE Linear regression                            Number of obs   =    365,207
Absorbing 4 HDFE groups                           F(   1,    282) =       3.96
Statistics robust to heteroskedasticity           Prob > F        =     0.0477
                                                  R-squared       =     0.2110
                                                  Adj R-squared   =     0.2096
                                                  Within R-sq.    =     0.0004
Number of clusters (msa)     =        283         Root MSE        =     2.0932

                                  (Std. err. adjusted for 283 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |   .2030614   .1021019     1.99   0.048     .0020829    .4040399
       _cons |  -4.730563   .8171239    -5.79   0.000    -6.338999   -3.122126
------------------------------------------------------------------------------

Absorbed degrees of freedom:
------------------------------------------------------+
  Absorbed FE | Categories  - Redundant  = Num. Coefs |
--------------+---------------------------------------|
         year |        78           0          78     |
          msa |       283         283           0    *|
        field |         5           1           4     |
   field#year |       369          78         291    ?|
------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 144 singleton observations)
(MWFE estimator converged in 6 iterations)

HDFE Linear regression                            Number of obs   =    365,094
Absorbing 5 HDFE groups                           F(   1,    275) =       3.74
Statistics robust to heteroskedasticity           Prob > F        =     0.0541
                                                  R-squared       =     0.2175
                                                  Adj R-squared   =     0.2140
                                                  Within R-sq.    =     0.0003
Number of clusters (msa)     =        276         Root MSE        =     2.0873

                                  (Std. err. adjusted for 276 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |   .1930417   .0998109     1.93   0.054    -.0034487    .3895322
       _cons |  -4.650462   .7989506    -5.82   0.000    -6.223298   -3.077626
------------------------------------------------------------------------------

Absorbed degrees of freedom:
------------------------------------------------------+
  Absorbed FE | Categories  - Redundant  = Num. Coefs |
--------------+---------------------------------------|
         year |        78           0          78     |
          msa |       276         276           0    *|
        field |         5           1           4     |
   field#year |       369          78         291    ?|
    msa#field |       987         987           0    *|
------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 1537 singleton observations)
(MWFE estimator converged in 17 iterations)

HDFE Linear regression                            Number of obs   =    363,701
Absorbing 6 HDFE groups                           F(   1,    267) =       4.14
Statistics robust to heteroskedasticity           Prob > F        =     0.0430
                                                  R-squared       =     0.2656
                                                  Adj R-squared   =     0.2566
                                                  Within R-sq.    =     0.0004
Number of clusters (msa)     =        268         Root MSE        =     2.0302

                                  (Std. err. adjusted for 268 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |   .2634749   .1295506     2.03   0.043     .0084043    .5185456
       _cons |  -5.211988   1.037182    -5.03   0.000    -7.254085   -3.169892
------------------------------------------------------------------------------

Absorbed degrees of freedom:
------------------------------------------------------+
  Absorbed FE | Categories  - Redundant  = Num. Coefs |
--------------+---------------------------------------|
         year |        78           0          78     |
          msa |       268         268           0    *|
        field |         5           1           4     |
   field#year |       369          78         291    ?|
    msa#field |       969         969           0    *|
         inst |      2796        2796           0    *|
------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 124323 singleton observations)
(MWFE estimator converged in 47 iterations)

HDFE Linear regression                            Number of obs   =    240,915
Absorbing 7 HDFE groups                           F(   1,    227) =       7.79
Statistics robust to heteroskedasticity           Prob > F        =     0.0057
                                                  R-squared       =     0.6564
                                                  Adj R-squared   =     0.5325
                                                  Within R-sq.    =     0.0002
Number of clusters (msa)     =        228         Root MSE        =     1.6140

                                  (Std. err. adjusted for 228 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |   .1909783   .0684169     2.79   0.006     .0561649    .3257916
       _cons |  -4.502701   .5492415    -8.20   0.000    -5.584965   -3.420438
------------------------------------------------------------------------------

Absorbed degrees of freedom:
------------------------------------------------------+
  Absorbed FE | Categories  - Redundant  = Num. Coefs |
--------------+---------------------------------------|
         year |        78           0          78     |
          msa |       228         228           0    *|
        field |         5           1           4     |
   field#year |       363          78         285    ?|
    msa#field |       852         852           0    *|
         inst |      1861        1861           0    *|
      athr_id |     60510           1       60509    ?|
------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 112021 singleton observations)
(MWFE estimator converged in 45 iterations)

HDFE Linear regression                            Number of obs   =    208,355
Absorbing 7 HDFE groups                           F(   1,    126) =       1.37
Statistics robust to heteroskedasticity           Prob > F        =     0.2437
                                                  R-squared       =     0.6577
                                                  Adj R-squared   =     0.5343
                                                  Within R-sq.    =     0.0000
Number of clusters (msa)     =        127         Root MSE        =     1.6343

                                  (Std. err. adjusted for 127 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
   ln_x_econ |   .0453717   .0387378     1.17   0.244    -.0312893    .1220326
       _cons |  -3.095936   .1996682   -15.51   0.000    -3.491074   -2.700798
------------------------------------------------------------------------------

Absorbed degrees of freedom:
------------------------------------------------------+
  Absorbed FE | Categories  - Redundant  = Num. Coefs |
--------------+---------------------------------------|
         year |        77           0          77     |
          msa |       127         127           0    *|
        field |         5           1           4     |
   field#year |       358          77         281    ?|
    field#msa |       549         549           0    *|
         inst |      1527        1527           0    *|
      athr_id |     52647           1       52646    ?|
------------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 124172 singleton observations)
(MWFE estimator converged in 45 iterations)

HDFE Linear regression                            Number of obs   =    241,066
Absorbing 5 HDFE groups                           F(   1,    240) =       7.86
Statistics robust to heteroskedasticity           Prob > F        =     0.0055
                                                  R-squared       =     0.6451
                                                  Adj R-squared   =     0.5202
                                                  Within R-sq.    =     0.0002
Number of clusters (msa)     =        241         Root MSE        =     1.6351

                                  (Std. err. adjusted for 241 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |   .1915042    .068316     2.80   0.005     .0569287    .3260798
       _cons |  -4.506848   .5482764    -8.22   0.000    -5.586896     -3.4268
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |        78           0          78     |
         msa |       241         241           0    *|
     athr_id |     60555           1       60554     |
       field |         5           1           4    ?|
        inst |      1881        1881           0    *|
-----------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(dropped 82420 singleton observations)
(MWFE estimator converged in 69 iterations)

HDFE Linear regression                            Number of obs   =    156,058
Absorbing 6 HDFE groups                           F(   1,    212) =       3.49
Statistics robust to heteroskedasticity           Prob > F        =     0.0630
                                                  R-squared       =     0.6822
                                                  Adj R-squared   =     0.5171
                                                  Within R-sq.    =     0.0001
Number of clusters (msa)     =        213         Root MSE        =     1.7081

                                  (Std. err. adjusted for 213 clusters in msa)
------------------------------------------------------------------------------
             |               Robust
        ln_y | Coefficient  std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        ln_x |   .2246656   .1202111     1.87   0.063    -.0122966    .4616278
       _cons |  -4.229132   .9889292    -4.28   0.000    -6.178526   -2.279738
------------------------------------------------------------------------------

Absorbed degrees of freedom:
-----------------------------------------------------+
 Absorbed FE | Categories  - Redundant  = Num. Coefs |
-------------+---------------------------------------|
        year |        78           0          78     |
         msa |       213         213           0    *|
     athr_id |     39134           1       39133     |
   gen_mesh1 |      6032         182        5850    ?|
   gen_mesh2 |      6878         273        6605    ?|
        inst |      1480        1480           0    *|
-----------------------------------------------------+
? = number of redundant parameters may be higher
* = FE nested within cluster; treated as redundant for DoF computation
(file ../temp/inst_cluster_size.dta not found)
file ../temp/inst_cluster_size.dta saved

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                           367,533  
    -----------------------------------------
(750 missing values generated)
(750 missing values generated)
(750 missing values generated)
(750 observations deleted)
(4,469 observations deleted)
(28,172 observations deleted)

     +---------------------------------------------------------------+
  1. |                                             msa_comb          |
     |         Washington-Arlington-Alexandria, DC-VA-MD-WV          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |           National Institutes of Health |     7401 |    18343 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                            .098667                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  2. |                                             msa_comb          |
     |                       Boston-Cambridge-Newton, MA-NH          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |                      Harvard University |     5247 |    21363 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .0538268                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  3. |                                             msa_comb          |
     |                                         Bay Area, CA          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |                     Stanford University |     4736 |    15939 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .0673366                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  4. |                                             msa_comb          |
     |                        Baltimore-Columbia-Towson, MD          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |                Johns Hopkins University |     4110 |     5728 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .2414301                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  5. |                                             msa_comb          |
     |                                         Bay Area, CA          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     | University of California, San Francisco |     3860 |    15939 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .0529584                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  6. |                                             msa_comb          |
     |                       Boston-Cambridge-Newton, MA-NH          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |                    Mass General Brigham |     3722 |    21363 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .0365599                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  7. |                                             msa_comb          |
     |                                        Ann Arbor, MI          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |        University of Michigan–Ann Arbor |     3523 |     3766 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .5234156                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  8. |                                             msa_comb          |
     |                               San Diego-Carlsbad, CA          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |     University of California, San Diego |     3396 |     7132 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                            .123482                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
  9. |                                             msa_comb          |
     |                          Seattle-Tacoma-Bellevue, WA          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |                University of Washington |     3320 |     6207 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .1461862                            |
     +---------------------------------------------------------------+

     +---------------------------------------------------------------+
 10. |                                             msa_comb          |
     |          Philadelphia-Camden-Wilmington, PA-NJ-DE-MD          |
     |---------------------------------------------------------------|
     |                                    inst | inst_a~s | msa_size |
     |              University of Pennsylvania |     3172 |     8141 |
     |---------------------------------------------------------------|
     |                           firm_e~y                            |
     |                           .0942849                            |
     +---------------------------------------------------------------+

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
firm_elast~y |        848    .0407537    .1094616   8.46e-06   .9426519
(21,887 observations deleted)
`"Baltimore-Columbia-Towson, MD"' `"Bay Area, CA"' `"Boston-Cambridge-Newton, M
> A-NH"' `"Washington-Arlington-Alexandria, DC-VA-MD-WV"'
(note: missing values will be sorted first)
(7,059 missing values generated)
(69 real changes made)
(270 real changes made)
(77 real changes made)
(72 real changes made)
(77 real changes made)
(1,787 real changes made)
(77 real changes made)
(72 real changes made)
(77 real changes made)
(1,569 real changes made)
(75 real changes made)
(60 real changes made)
(2,777 real changes made)
(72 real changes made)
(77 real changes made)
(77 real changes made)
(6,720 observations deleted)
(note: missing values will be sorted first)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       group |        216     1.99537    .8268612          1          3
(216 missing values generated)
(143 missing values generated)
variable labely_lab was str15 now str33
(143 real changes made)
(5,338 observations deleted)
(note: missing values will be sorted first)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       group |        296    2.472973    1.116568          1          4
(296 missing values generated)
(226 missing values generated)
variable labely_lab was str15 now str19
(226 real changes made)
(5,120 observations deleted)
(note: missing values will be sorted first)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       group |        303    2.508251    1.127221          1          4
(303 missing values generated)
(226 missing values generated)
variable labely_lab was str15 now str20
(226 real changes made)
(4,221 observations deleted)
(note: missing values will be sorted first)

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       group |        212    2.009434    .8486988          1          3
(212 missing values generated)
(135 missing values generated)
variable labely_lab was str15 now str45
(135 real changes made)
file ../output/figures/harvard_elasticity_trend.pdf saved as PDF format
file ../output/figures/mit_elasticity_trend.pdf saved as PDF format
file ../output/figures/mgh_elasticity_trend.pdf saved as PDF format
(already sorted)
file ../output/figures/stanford_elasticity_trend.pdf saved as PDF format
(already sorted)
file ../output/figures/nih_elasticity_trend.pdf saved as PDF format
(already sorted)
file ../output/figures/jhu_elasticity_trend.pdf saved as PDF format
(already sorted)
file ../output/figures/umich_elasticity_trend.pdf saved as PDF format

. 
end of do-file

--------------------------------------------------------------------------------
Makelog ended: 2024-01-26 00:05:32
Working directory: /export/home/dor/cxu/innovation_projs/analysis/science_geo/cluster_descriptives/code
--------------------------------------------------------------------------------
